    82 instructions before optimizations.
     1 instructions eliminated by Output Temp Elimination (4 iterations).
     4 instructions eliminated by Dead Code Elimination (4 iterations).
     3 instructions eliminated by Conditional Jump Optimization (4 iterations).
     3 instructions eliminated by Single Step Elimination (2 passes, 6 iterations).
     2 instructions eliminated by If Expression Optimization (3 iterations).
     7 instructions eliminated by Data Flow Optimization (5 iterations).
     1 instructions eliminated by Unreachable Code Elimination (2 iterations).
     2 instructions eliminated by Stack Optimization.
     2 instructions eliminated by Jump Straightening.
    56 instructions after optimizations.

Modifications by Output Temp Elimination, pass 1, iteration 1:
 
    77 label __label23
    78 pop bank1 __fn0_n
    79 set __retval13 __fn0retval
-    * op mul __tmp14 -1 __retval13
-    * set __tmp11 __tmp14
+   80 op mul __tmp11 -1 __retval13
    81 jump __label22 always
    82 label __label21
    83 set __tmp11 __fn0_n

Modifications by Dead Code Elimination, pass 2, iteration 1:
 
    44 op equal __tmp5 __retval4 3
    45 jump __label15 equal __tmp5 false
    46 jump __label1 always
-    * set __tmp6 null
    47 jump __label16 always
    48 label __label15
-    * set __tmp6 null
    49 label __label16
    50 print i
    51 set __fn0_n i
 
    55 op equal __tmp8 __retval7 12
    56 jump __label18 equal __tmp8 false
    57 jump __label3 always
-    * set __tmp9 null
    58 jump __label19 always
    59 label __label18
-    * set __tmp9 null
    60 label __label19
    61 label __label1
    62 goto __tmp0 marker0

Modifications by Conditional Jump Optimization, pass 2, iteration 1:
 
    41 callrec bank1 __label0 __label14
    42 label __label14
    43 set __retval4 __fn0retval
-    * op equal __tmp5 __retval4 3
-    * jump __label15 equal __tmp5 false
+   44 jump __label15 notEqual __retval4 3
    45 jump __label1 always
    46 jump __label16 always
    47 label __label15
 
    51 callrec bank1 __label0 __label17
    52 label __label17
    53 set __retval7 __fn0retval
-    * op equal __tmp8 __retval7 12
-    * jump __label18 equal __tmp8 false
+   54 jump __label18 notEqual __retval7 12
    55 jump __label3 always
    56 jump __label19 always
    57 label __label18
 
    62 label __label3
    63 end
    64 label __label0
-    * op greaterThan __tmp10 __fn0_n 0
-    * jump __label21 equal __tmp10 false
+   65 jump __label21 lessThanEq __fn0_n 0
    66 op mul __tmp12 -1 __fn0_n
    67 push bank1 __fn0_n
    68 set __fn0_n __tmp12

Modifications by Single Step Elimination, pass 2, iteration 1:
 
    43 set __retval4 __fn0retval
    44 jump __label15 notEqual __retval4 3
    45 jump __label1 always
-    * jump __label16 always
    46 label __label15
    47 label __label16
    48 print i
 
    52 set __retval7 __fn0retval
    53 jump __label18 notEqual __retval7 12
    54 jump __label3 always
-    * jump __label19 always
    55 label __label18
    56 label __label19
    57 label __label1

Modifications by If Expression Optimization, pass 2, iteration 1:
 
    60 label __label3
    61 end
    62 label __label0
-    * jump __label21 lessThanEq __fn0_n 0
+   63 set __fn0retval __fn0_n
+   64 jump __label22 lessThanEq __fn0_n 0
    65 op mul __tmp12 -1 __fn0_n
    66 push bank1 __fn0_n
    67 set __fn0_n __tmp12
 
    69 label __label23
    70 pop bank1 __fn0_n
    71 set __retval13 __fn0retval
-    * op mul __tmp11 -1 __retval13
+   72 op mul __fn0retval -1 __retval13
    73 jump __label22 always
-    * label __label21
-    * set __tmp11 __fn0_n
    74 label __label22
-    * set __fn0retval __tmp11
    75 label __label20
    76 return bank1
    77 end

Modifications by Data Flow Optimization, pass 2, iteration 1:
 
     7 callrec bank1 __label0 __label6
     8 label __label6
     9 set __retval1 __fn0retval
-    * set i __retval1
+   10 set i __fn0retval
    11 jump __label2 always
    12 gotolabel __label5 marker0
    13 setaddr __tmp0 __label7
 
    19 callrec bank1 __label0 __label9
    20 label __label9
    21 set __retval2 __fn0retval
-    * set i __retval2
+   22 set i __fn0retval
    23 jump __label2 always
    24 gotolabel __label8 marker0
    25 setaddr __tmp0 __label10
 
    31 callrec bank1 __label0 __label12
    32 label __label12
    33 set __retval3 __fn0retval
-    * set i __retval3
+   34 set i __fn0retval
    35 jump __label2 always
    36 gotolabel __label11 marker0
    37 setaddr __tmp0 __label13
 
    41 callrec bank1 __label0 __label14
    42 label __label14
    43 set __retval4 __fn0retval
-    * jump __label15 notEqual __retval4 3
+   44 jump __label15 notEqual __fn0retval 3
    45 jump __label1 always
    46 label __label15
    47 label __label16
 
    50 callrec bank1 __label0 __label17
    51 label __label17
    52 set __retval7 __fn0retval
-    * jump __label18 notEqual __retval7 12
+   53 jump __label18 notEqual __fn0retval 12
    54 jump __label3 always
    55 label __label18
    56 label __label19
 
    64 jump __label22 lessThanEq __fn0_n 0
    65 op mul __tmp12 -1 __fn0_n
    66 push bank1 __fn0_n
-    * set __fn0_n __tmp12
+   67 op mul __fn0_n -1 __fn0_n
    68 callrec bank1 __label0 __label23
    69 label __label23
    70 pop bank1 __fn0_n
    71 set __retval13 __fn0retval
-    * op mul __fn0retval -1 __retval13
+   72 op mul __fn0retval -1 __fn0retval
    73 jump __label22 always
    74 label __label22
    75 label __label20

Modifications by Data Flow Optimization, pass 2, iteration 2:
 
     6 set __fn0_n 2
     7 callrec bank1 __label0 __label6
     8 label __label6
-    * set __retval1 __fn0retval
     9 set i __fn0retval
    10 jump __label2 always
    11 gotolabel __label5 marker0
 
    17 set __fn0_n 5
    18 callrec bank1 __label0 __label9
    19 label __label9
-    * set __retval2 __fn0retval
    20 set i __fn0retval
    21 jump __label2 always
    22 gotolabel __label8 marker0
 
    28 set __fn0_n 12
    29 callrec bank1 __label0 __label12
    30 label __label12
-    * set __retval3 __fn0retval
    31 set i __fn0retval
    32 jump __label2 always
    33 gotolabel __label11 marker0
 
    37 set __fn0_n i
    38 callrec bank1 __label0 __label14
    39 label __label14
-    * set __retval4 __fn0retval
    40 jump __label15 notEqual __fn0retval 3
    41 jump __label1 always
    42 label __label15
 
    45 set __fn0_n i
    46 callrec bank1 __label0 __label17
    47 label __label17
-    * set __retval7 __fn0retval
    48 jump __label18 notEqual __fn0retval 12
    49 jump __label3 always
    50 label __label18
 
    57 label __label0
    58 set __fn0retval __fn0_n
    59 jump __label22 lessThanEq __fn0_n 0
-    * op mul __tmp12 -1 __fn0_n
    60 push bank1 __fn0_n
    61 op mul __fn0_n -1 __fn0_n
    62 callrec bank1 __label0 __label23
    63 label __label23
    64 pop bank1 __fn0_n
-    * set __retval13 __fn0retval
    65 op mul __fn0retval -1 __fn0retval
    66 jump __label22 always
    67 label __label22

Modifications by Single Step Elimination, pass 3, iteration 1:
 
    63 label __label23
    64 pop bank1 __fn0_n
    65 op mul __fn0retval -1 __fn0retval
-    * jump __label22 always
    66 label __label22
    67 label __label20
    68 return bank1

Modifications by Jump Straightening, pass 4, iteration 1:
 
    37 set __fn0_n i
    38 callrec bank1 __label0 __label14
    39 label __label14
-    * jump __label15 notEqual __fn0retval 3
-    * jump __label1 always
+   40 jump __label1 equal __fn0retval 3
    41 label __label15
    42 label __label16
    43 print i
    44 set __fn0_n i
    45 callrec bank1 __label0 __label17
    46 label __label17
-    * jump __label18 notEqual __fn0retval 12
-    * jump __label3 always
+   47 jump __label3 equal __fn0retval 12
    48 label __label18
    49 label __label19
    50 label __label1

Modifications by Unreachable Code Elimination, pass 4, iteration 1:
 
    64 label __label22
    65 label __label20
    66 return bank1
-    * end

Modifications by Stack Optimization, pass 4, iteration 1:
 
    55 label __label0
    56 set __fn0retval __fn0_n
    57 jump __label22 lessThanEq __fn0_n 0
-    * push bank1 __fn0_n
    58 op mul __fn0_n -1 __fn0_n
    59 callrec bank1 __label0 __label23
    60 label __label23
-    * pop bank1 __fn0_n
    61 op mul __fn0retval -1 __fn0retval
    62 label __label22
    63 label __label20

Final code before resolving virtual instructions:

set __sp 0
setaddr __tmp0 __label4
set i 1
jump __label2 always 0 0
gotolabel __label4 marker0
setaddr __tmp0 __label5
set __fn0_n 2
callrec bank1 __label0 __label6
label __label6
set i __fn0retval
jump __label2 always 0 0
gotolabel __label5 marker0
setaddr __tmp0 __label7
set i 3
jump __label2 always 0 0
gotolabel __label7 marker0
setaddr __tmp0 __label8
set __fn0_n 5
callrec bank1 __label0 __label9
label __label9
set i __fn0retval
jump __label2 always 0 0
gotolabel __label8 marker0
setaddr __tmp0 __label10
set i 8
jump __label2 always 0 0
gotolabel __label10 marker0
setaddr __tmp0 __label11
set __fn0_n 12
callrec bank1 __label0 __label12
label __label12
set i __fn0retval
jump __label2 always 0 0
gotolabel __label11 marker0
setaddr __tmp0 __label13
set i 15
label __label2
set __fn0_n i
callrec bank1 __label0 __label14
label __label14
jump __label1 equal __fn0retval 3
label __label15
label __label16
print i
set __fn0_n i
callrec bank1 __label0 __label17
label __label17
jump __label3 equal __fn0retval 12
label __label18
label __label19
label __label1
goto __tmp0 marker0
gotolabel __label13 marker0
label __label3
end
label __label0
set __fn0retval __fn0_n
jump __label22 lessThanEq __fn0_n 0
op mul __fn0_n -1 __fn0_n
callrec bank1 __label0 __label23
label __label23
op mul __fn0retval -1 __fn0retval
label __label22
label __label20
return bank1
