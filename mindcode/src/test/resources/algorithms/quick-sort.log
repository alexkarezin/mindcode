   123 instructions before optimizations.
    10 instructions eliminated by DeadCodeEliminator (1 iterations).
     4 instructions eliminated by SingleStepJumpEliminator (1 iterations).
     4 instructions eliminated by OutputTempEliminator.
     2 instructions eliminated by ExpressionOptimizer.
     5 instructions eliminated by ImproveNegativeConditionalJumps.
     2 loops improved by LoopOptimizer.
     1 instructions eliminated by LoopOptimizer.
     1 instructions eliminated by IfExpressionOptimizer.
     5 instructions eliminated by DataFlowOptimizer (3 iterations).
     2 instructions eliminated by UnreachableCodeEliminator (1 iterations).
     2 instructions eliminated by SingleStepJumpEliminator (1 iterations).
    24 instructions eliminated by StackUsageOptimizer.
    63 instructions after optimizations.

Modifications by DeadCodeEliminator, iteration 1:
 
     3 set __fn0_right 511
     4 callrec bank1 __label0 __label1
     5 label __label1
-    * set __retval0 __fn0retval
     6 set i 0
     7 label __label2
     8 jump __label4 greaterThanEq i 512
 
    31 read __tmp11 ARRAY __fn1_right
    32 write __tmp11 ARRAY __fn1_pivot_index
    33 write __fn1_pivot ARRAY __fn1_right
-    * set __tmp10 __fn1_pivot
    34 jump __label11 always
    35 label __label10
-    * set __tmp10 null
    36 label __label11
    37 set __fn1_index __fn1_left
    38 set __tmp12 __fn1_right
 
    48 read __tmp18 ARRAY __fn1_index
    49 write __tmp18 ARRAY __fn1_i
    50 write __fn1_curr ARRAY __fn1_index
-    * set __tmp17 __fn1_curr
    51 jump __label18 always
    52 label __label17
-    * set __tmp17 null
    53 label __label18
    54 op add __tmp19 __fn1_index 1
    55 set __fn1_index __tmp19
-    * set __tmp15 __tmp19
    56 jump __label16 always
    57 label __label15
-    * set __tmp15 null
    58 label __label16
    59 label __label13
    60 op add __fn1_i __fn1_i 1
 
    65 read __tmp22 ARRAY __fn1_index
    66 write __tmp22 ARRAY __fn1_right
    67 write __fn1_pivot ARRAY __fn1_index
-    * set __tmp21 __fn1_pivot
    68 jump __label20 always
    69 label __label19
-    * set __tmp21 null
    70 label __label20
    71 set __retval7 __fn1_index
    72 jump __label9 always
 
    86 pop bank1 __fn0_pivot_index
    87 pop bank1 __fn0_right
    88 pop bank1 __fn0_left
-    * set __retval24 __fn0retval
    89 op add __tmp25 __fn0_new_pivot_index 1
    90 push bank1 __fn0_left
    91 push bank1 __fn0_right

Modifications by SingleStepJumpEliminator, iteration 1:
 
    31 read __tmp11 ARRAY __fn1_right
    32 write __tmp11 ARRAY __fn1_pivot_index
    33 write __fn1_pivot ARRAY __fn1_right
-    * jump __label11 always
    34 label __label10
    35 label __label11
    36 set __fn1_index __fn1_left
 
    47 read __tmp18 ARRAY __fn1_index
    48 write __tmp18 ARRAY __fn1_i
    49 write __fn1_curr ARRAY __fn1_index
-    * jump __label18 always
    50 label __label17
    51 label __label18
    52 op add __tmp19 __fn1_index 1
    53 set __fn1_index __tmp19
-    * jump __label16 always
    54 label __label15
    55 label __label16
    56 label __label13
 
    62 read __tmp22 ARRAY __fn1_index
    63 write __tmp22 ARRAY __fn1_right
    64 write __fn1_pivot ARRAY __fn1_index
-    * jump __label20 always
    65 label __label19
    66 label __label20
    67 set __retval7 __fn1_index

Modifications by OutputTempEliminator, iteration 1:
 
    18 jump __label6 equal __tmp2 false
    19 op sub __tmp4 __fn0_right __fn0_left
    20 op idiv __tmp5 __tmp4 2
-    * op add __tmp6 __fn0_left __tmp5
-    * set __fn0_pivot_index __tmp6
+   21 op add __fn0_pivot_index __fn0_left __tmp5
    22 label __label8
    23 set __fn1_left __fn0_left
    24 set __fn1_right __fn0_right
    25 set __fn1_pivot_index __fn0_pivot_index
-    * read __tmp8 ARRAY __fn1_pivot_index
-    * set __fn1_pivot __tmp8
+   26 read __fn1_pivot ARRAY __fn1_pivot_index
    27 op notEqual __tmp9 __fn1_pivot_index __fn1_right
    28 jump __label10 equal __tmp9 false
    29 read __tmp11 ARRAY __fn1_right
 
    36 set __fn1_i __fn1_left
    37 label __label12
    38 jump __label14 greaterThanEq __fn1_i __tmp12
-    * read __tmp13 ARRAY __fn1_i
-    * set __fn1_curr __tmp13
+   39 read __fn1_curr ARRAY __fn1_i
    40 op lessThan __tmp14 __fn1_curr __fn1_pivot
    41 jump __label15 equal __tmp14 false
    42 op notEqual __tmp16 __fn1_i __fn1_index
 
    46 write __fn1_curr ARRAY __fn1_index
    47 label __label17
    48 label __label18
-    * op add __tmp19 __fn1_index 1
-    * set __fn1_index __tmp19
+   49 op add __fn1_index __fn1_index 1
    50 label __label15
    51 label __label16
    52 label __label13

Modifications by ExpressionOptimizer, iteration 1:
 
    70 push bank1 __fn0_right
    71 push bank1 __fn0_pivot_index
    72 push bank1 __fn0_new_pivot_index
-    * set __fn0_left __fn0_left
    73 set __fn0_right __tmp23
    74 callrec bank1 __label0 __label21
    75 label __label21
 
    83 push bank1 __fn0_pivot_index
    84 push bank1 __fn0_new_pivot_index
    85 set __fn0_left __tmp25
-    * set __fn0_right __fn0_right
    86 callrec bank1 __label0 __label22
    87 label __label22
    88 pop bank1 __fn0_new_pivot_index

Modifications by ImproveNegativeConditionalJumps, iteration 1:
 
    14 label __label4
    15 end
    16 label __label0
-    * op greaterThan __tmp2 __fn0_right __fn0_left
-    * jump __label6 equal __tmp2 false
+   17 jump __label6 lessThanEq __fn0_right __fn0_left
    18 op sub __tmp4 __fn0_right __fn0_left
    19 op idiv __tmp5 __tmp4 2
    20 op add __fn0_pivot_index __fn0_left __tmp5
 
    23 set __fn1_right __fn0_right
    24 set __fn1_pivot_index __fn0_pivot_index
    25 read __fn1_pivot ARRAY __fn1_pivot_index
-    * op notEqual __tmp9 __fn1_pivot_index __fn1_right
-    * jump __label10 equal __tmp9 false
+   26 jump __label10 equal __fn1_pivot_index __fn1_right
    27 read __tmp11 ARRAY __fn1_right
    28 write __tmp11 ARRAY __fn1_pivot_index
    29 write __fn1_pivot ARRAY __fn1_right
 
    35 label __label12
    36 jump __label14 greaterThanEq __fn1_i __tmp12
    37 read __fn1_curr ARRAY __fn1_i
-    * op lessThan __tmp14 __fn1_curr __fn1_pivot
-    * jump __label15 equal __tmp14 false
-    * op notEqual __tmp16 __fn1_i __fn1_index
-    * jump __label17 equal __tmp16 false
+   38 jump __label15 greaterThanEq __fn1_curr __fn1_pivot
+   39 jump __label17 equal __fn1_i __fn1_index
    40 read __tmp18 ARRAY __fn1_index
    41 write __tmp18 ARRAY __fn1_i
    42 write __fn1_curr ARRAY __fn1_index
 
    49 op add __fn1_i __fn1_i 1
    50 jump __label12 always
    51 label __label14
-    * op notEqual __tmp20 __fn1_index __fn1_right
-    * jump __label19 equal __tmp20 false
+   52 jump __label19 equal __fn1_index __fn1_right
    53 read __tmp22 ARRAY __fn1_index
    54 write __tmp22 ARRAY __fn1_right
    55 write __fn1_pivot ARRAY __fn1_index

Modifications by LoopOptimizer, iteration 1:
 
     5 label __label1
     6 set i 0
     7 label __label2
-    * jump __label4 greaterThanEq i 512
+    8 label __label23
     9 read __tmp1 ARRAY i
    10 print __tmp1
    11 label __label3
    12 op add i i 1
-    * jump __label2 always
+   13 jump __label23 lessThan i 512
    14 label __label4
    15 end
    16 label __label0
 
    34 set __fn1_i __fn1_left
    35 label __label12
    36 jump __label14 greaterThanEq __fn1_i __tmp12
+   37 label __label24
    38 read __fn1_curr ARRAY __fn1_i
    39 jump __label15 greaterThanEq __fn1_curr __fn1_pivot
    40 jump __label17 equal __fn1_i __fn1_index
 
    48 label __label16
    49 label __label13
    50 op add __fn1_i __fn1_i 1
-    * jump __label12 always
+   51 jump __label24 lessThan __fn1_i __tmp12
    52 label __label14
    53 jump __label19 equal __fn1_index __fn1_right
    54 read __tmp22 ARRAY __fn1_index

Modifications by IfExpressionOptimizer, iteration 1:
 
    14 label __label4
    15 end
    16 label __label0
-    * jump __label6 lessThanEq __fn0_right __fn0_left
+   17 set __fn0retval null
+   18 jump __label7 lessThanEq __fn0_right __fn0_left
    19 op sub __tmp4 __fn0_right __fn0_left
    20 op idiv __tmp5 __tmp4 2
    21 op add __fn0_pivot_index __fn0_left __tmp5
 
    87 pop bank1 __fn0_right
    88 pop bank1 __fn0_left
    89 set __retval26 __fn0retval
-    * set __tmp3 __retval26
+   90 set __fn0retval __retval26
    91 jump __label7 always
-    * label __label6
-    * set __tmp3 null
    92 label __label7
-    * set __fn0retval __tmp3
    93 label __label5
    94 return bank1
    95 end

Modifications by DataFlowOptimizer, iteration 1:
 
    23 set __fn1_left __fn0_left
    24 set __fn1_right __fn0_right
    25 set __fn1_pivot_index __fn0_pivot_index
-    * read __fn1_pivot ARRAY __fn1_pivot_index
-    * jump __label10 equal __fn1_pivot_index __fn1_right
-    * read __tmp11 ARRAY __fn1_right
-    * write __tmp11 ARRAY __fn1_pivot_index
-    * write __fn1_pivot ARRAY __fn1_right
+   26 read __fn1_pivot ARRAY __fn0_pivot_index
+   27 jump __label10 equal __fn0_pivot_index __fn0_right
+   28 read __tmp11 ARRAY __fn0_right
+   29 write __tmp11 ARRAY __fn0_pivot_index
+   30 write __fn1_pivot ARRAY __fn0_right
    31 label __label10
    32 label __label11
-    * set __fn1_index __fn1_left
-    * set __tmp12 __fn1_right
-    * set __fn1_i __fn1_left
+   33 set __fn1_index __fn0_left
+   34 set __tmp12 __fn0_right
+   35 set __fn1_i __fn0_left
    36 label __label12
-    * jump __label14 greaterThanEq __fn1_i __tmp12
+   37 jump __label14 greaterThanEq __fn1_left __fn1_right
    38 label __label24
    39 read __fn1_curr ARRAY __fn1_i
    40 jump __label15 greaterThanEq __fn1_curr __fn1_pivot
 
    49 label __label16
    50 label __label13
    51 op add __fn1_i __fn1_i 1
-    * jump __label24 lessThan __fn1_i __tmp12
+   52 jump __label24 lessThan __fn1_i __fn1_right
    53 label __label14
-    * jump __label19 equal __fn1_index __fn1_right
+   54 jump __label19 equal __fn1_index __fn0_right
    55 read __tmp22 ARRAY __fn1_index
-    * write __tmp22 ARRAY __fn1_right
+   56 write __tmp22 ARRAY __fn0_right
    57 write __fn1_pivot ARRAY __fn1_index
    58 label __label19
    59 label __label20
 
    62 set __retval7 null
    63 label __label9
    64 set __fn0_new_pivot_index __retval7
-    * op sub __tmp23 __fn0_new_pivot_index 1
+   65 op sub __tmp23 __retval7 1
    66 push bank1 __fn0_left
    67 push bank1 __fn0_right
    68 push bank1 __fn0_pivot_index
 
    87 pop bank1 __fn0_right
    88 pop bank1 __fn0_left
    89 set __retval26 __fn0retval
-    * set __fn0retval __retval26
+   90 set __fn0retval __fn0retval
    91 jump __label7 always
    92 label __label7
    93 label __label5

Modifications by DataFlowOptimizer, iteration 2:
 
    22 label __label8
    23 set __fn1_left __fn0_left
    24 set __fn1_right __fn0_right
-    * set __fn1_pivot_index __fn0_pivot_index
    25 read __fn1_pivot ARRAY __fn0_pivot_index
    26 jump __label10 equal __fn0_pivot_index __fn0_right
    27 read __tmp11 ARRAY __fn0_right
 
    30 label __label10
    31 label __label11
    32 set __fn1_index __fn0_left
-    * set __tmp12 __fn0_right
    33 set __fn1_i __fn0_left
    34 label __label12
-    * jump __label14 greaterThanEq __fn1_left __fn1_right
+   35 jump __label14 greaterThanEq __fn0_left __fn0_right
    36 label __label24
    37 read __fn1_curr ARRAY __fn1_i
    38 jump __label15 greaterThanEq __fn1_curr __fn1_pivot
 
    47 label __label16
    48 label __label13
    49 op add __fn1_i __fn1_i 1
-    * jump __label24 lessThan __fn1_i __fn1_right
+   50 jump __label24 lessThan __fn1_i __fn0_right
    51 label __label14
    52 jump __label19 equal __fn1_index __fn0_right
    53 read __tmp22 ARRAY __fn1_index
 
    84 pop bank1 __fn0_pivot_index
    85 pop bank1 __fn0_right
    86 pop bank1 __fn0_left
-    * set __retval26 __fn0retval
    87 set __fn0retval __fn0retval
    88 jump __label7 always
    89 label __label7

Modifications by DataFlowOptimizer, iteration 3:
 
    20 op idiv __tmp5 __tmp4 2
    21 op add __fn0_pivot_index __fn0_left __tmp5
    22 label __label8
-    * set __fn1_left __fn0_left
-    * set __fn1_right __fn0_right
    23 read __fn1_pivot ARRAY __fn0_pivot_index
    24 jump __label10 equal __fn0_pivot_index __fn0_right
    25 read __tmp11 ARRAY __fn0_right

Modifications by UnreachableCodeEliminator, iteration 1:
 
    55 label __label20
    56 set __retval7 __fn1_index
    57 jump __label9 always
-    * set __retval7 null
    58 label __label9
    59 set __fn0_new_pivot_index __retval7
    60 op sub __tmp23 __retval7 1
 
    86 label __label7
    87 label __label5
    88 return bank1
-    * end

Modifications by SingleStepJumpEliminator, iteration 1:
 
    54 label __label19
    55 label __label20
    56 set __retval7 __fn1_index
-    * jump __label9 always
    57 label __label9
    58 set __fn0_new_pivot_index __retval7
    59 op sub __tmp23 __retval7 1
 
    81 pop bank1 __fn0_right
    82 pop bank1 __fn0_left
    83 set __fn0retval __fn0retval
-    * jump __label7 always
    84 label __label7
    85 label __label5
    86 return bank1

Modifications by StackUsageOptimizer, iteration 1:
 
    57 label __label9
    58 set __fn0_new_pivot_index __retval7
    59 op sub __tmp23 __retval7 1
-    * push bank1 __fn0_left
    60 push bank1 __fn0_right
-    * push bank1 __fn0_pivot_index
    61 push bank1 __fn0_new_pivot_index
    62 set __fn0_right __tmp23
    63 callrec bank1 __label0 __label21
    64 label __label21
    65 pop bank1 __fn0_new_pivot_index
-    * pop bank1 __fn0_pivot_index
    66 pop bank1 __fn0_right
-    * pop bank1 __fn0_left
    67 op add __tmp25 __fn0_new_pivot_index 1
-    * push bank1 __fn0_left
-    * push bank1 __fn0_right
-    * push bank1 __fn0_pivot_index
-    * push bank1 __fn0_new_pivot_index
    68 set __fn0_left __tmp25
    69 callrec bank1 __label0 __label22
    70 label __label22
-    * pop bank1 __fn0_new_pivot_index
-    * pop bank1 __fn0_pivot_index
-    * pop bank1 __fn0_right
-    * pop bank1 __fn0_left
    71 set __fn0retval __fn0retval
    72 label __label7
    73 label __label5

Final code before resolving virtual instructions:

set __sp 0
set ARRAY bank2
set __fn0_left 0
set __fn0_right 511
callrec bank1 __label0 __label1
label __label1
set i 0
label __label2
label __label23
read __tmp1 ARRAY i
print __tmp1
label __label3
op add i i 1
jump __label23 lessThan i 512
label __label4
end
label __label0
set __fn0retval null
jump __label7 lessThanEq __fn0_right __fn0_left
op sub __tmp4 __fn0_right __fn0_left
op idiv __tmp5 __tmp4 2
op add __fn0_pivot_index __fn0_left __tmp5
label __label8
read __fn1_pivot ARRAY __fn0_pivot_index
jump __label10 equal __fn0_pivot_index __fn0_right
read __tmp11 ARRAY __fn0_right
write __tmp11 ARRAY __fn0_pivot_index
write __fn1_pivot ARRAY __fn0_right
label __label10
label __label11
set __fn1_index __fn0_left
set __fn1_i __fn0_left
label __label12
jump __label14 greaterThanEq __fn0_left __fn0_right
label __label24
read __fn1_curr ARRAY __fn1_i
jump __label15 greaterThanEq __fn1_curr __fn1_pivot
jump __label17 equal __fn1_i __fn1_index
read __tmp18 ARRAY __fn1_index
write __tmp18 ARRAY __fn1_i
write __fn1_curr ARRAY __fn1_index
label __label17
label __label18
op add __fn1_index __fn1_index 1
label __label15
label __label16
label __label13
op add __fn1_i __fn1_i 1
jump __label24 lessThan __fn1_i __fn0_right
label __label14
jump __label19 equal __fn1_index __fn0_right
read __tmp22 ARRAY __fn1_index
write __tmp22 ARRAY __fn0_right
write __fn1_pivot ARRAY __fn1_index
label __label19
label __label20
set __retval7 __fn1_index
label __label9
set __fn0_new_pivot_index __retval7
op sub __tmp23 __retval7 1
push bank1 __fn0_right
push bank1 __fn0_new_pivot_index
set __fn0_right __tmp23
callrec bank1 __label0 __label21
label __label21
pop bank1 __fn0_new_pivot_index
pop bank1 __fn0_right
op add __tmp25 __fn0_new_pivot_index 1
set __fn0_left __tmp25
callrec bank1 __label0 __label22
label __label22
set __fn0retval __fn0retval
label __label7
label __label5
return bank1
