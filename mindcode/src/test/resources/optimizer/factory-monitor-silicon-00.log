   477 instructions before optimizations.
    48 instructions eliminated by DeadCodeEliminator (2 iterations).
    16 instructions eliminated by SingleStepJumpEliminator (1 iterations).
    48 instructions eliminated by OutputTempEliminator.
     2 instructions eliminated by ExpressionOptimizer.
    26 instructions eliminated by ImproveNegativeConditionalJumps.
     3 loops improved by LoopOptimizer.
     1 instructions added by LoopOptimizer.
     7 instructions eliminated by IfExpressionOptimizer.
    22 instructions eliminated by DataFlowOptimizer (3 iterations).
     2 instructions updated by PropagateJumpTargets.
     6 instructions eliminated by SingleStepJumpEliminator (1 iterations).
     1 instructions eliminated by PrintMerger.
   302 instructions after optimizations.

Modifications by DeadCodeEliminator, iteration 1:
 
     5 jump __label0 equal __tmp0 false
     6 set BAR_LENGTH 53
     7 set BAR_SPACE 74
-    * set __tmp1 BAR_SPACE
     8 jump __label1 always
     9 label __label0
    10 set BAR_LENGTH 61
    11 set BAR_SPACE 88
-    * set __tmp1 BAR_SPACE
    12 label __label1
    13 set clx 0
    14 op notEqual __tmp2 bank1 null
 
    87 jump __label16 equal __tmp29 false
    88 set minimum s
    89 set icon @sand
-    * set __tmp30 icon
    90 jump __label17 always
    91 label __label16
-    * set __tmp30 null
    92 label __label17
    93 op lessThan __tmp31 c minimum
    94 jump __label18 equal __tmp31 false
    95 set minimum c
    96 set icon @coal
-    * set __tmp32 icon
    97 jump __label19 always
    98 label __label18
-    * set __tmp32 null
    99 label __label19
   100 op lessThan __tmp33 p minimum
   101 jump __label20 equal __tmp33 false
   102 set minimum p
   103 set icon @pyratite
-    * set __tmp34 icon
   104 jump __label21 always
   105 label __label20
-    * set __tmp34 null
   106 label __label21
   107 op greaterThan __tmp35 a 10
   108 op sub __tmp36 31 a
 
   111 set showa __tmp38
   112 jump __label22 equal showa false
   113 set icon @silicon
-    * set __tmp39 icon
   114 jump __label23 always
   115 label __label22
-    * set __tmp39 null
   116 label __label23
   117 set column 0
   118 set row index
 
   131 op land __tmp48 __tmp46 __tmp47
   132 jump __label24 equal __tmp48 false
   133 set icon @silicon-crucible
-    * set __tmp49 icon
   134 jump __label25 always
   135 label __label24
-    * set __tmp49 null
   136 label __label25
   137 draw color 255 255 255 255
   138 jump __label26 equal e false
 
   163 draw rect __tmp62 __tmp63 2 2
   164 set __tmp52 null
   165 label __label29
-    * set __tmp50 __tmp52
   166 jump __label27 always
   167 label __label26
   168 draw color 255 80 80 255
 
   182 op sub __tmp73 y 1
   183 draw lineRect __tmp72 __tmp73 16 16
   184 draw stroke 2
-    * set __tmp50 null
   185 label __label27
   186 op add __tmp74 x 16
   187 set x __tmp74
 
   191 set red 255
   192 set green 0
   193 set blue 0
-    * set __tmp77 blue
   194 jump __label31 always
   195 label __label30
   196 jump __label32 equal showa false
 
   222 set blue 0
   223 set __tmp78 blue
   224 label __label33
-    * set __tmp77 __tmp78
   225 label __label31
   226 op greaterThan __tmp85 boost EXPECTED_BOOST
   227 jump __label38 equal __tmp85 false
 
   232 op max __tmp89 192 blue
   233 set blue __tmp89
   234 set boost EXPECTED_BOOST
-    * set __tmp86 boost
   235 jump __label39 always
   236 label __label38
-    * set __tmp86 null
   237 label __label39
   238 op mul __tmp90 BAR_LENGTH boost
   239 op idiv __tmp91 __tmp90 EXPECTED_BOOST
 
   248 set index __tmp94
   249 op add __tmp95 factories 1
   250 set factories __tmp95
-    * set __tmp20 factories
   251 jump __label15 always
   252 label __label14
-    * set __tmp20 null
   253 label __label15
   254 label __label12
   255 op add __tmp96 n 1
 
   285 jump __label45 equal __tmp109 false
   286 set minimum s
   287 set icon @sand
-    * set __tmp110 icon
   288 jump __label46 always
   289 label __label45
-    * set __tmp110 null
   290 label __label46
   291 op lessThan __tmp111 c minimum
   292 jump __label47 equal __tmp111 false
   293 set minimum c
   294 set icon @coal
-    * set __tmp112 icon
   295 jump __label48 always
   296 label __label47
-    * set __tmp112 null
   297 label __label48
   298 op lessThan __tmp113 l minimum
   299 jump __label49 equal __tmp113 false
   300 set minimum l
   301 set icon @lead
-    * set __tmp114 icon
   302 jump __label50 always
   303 label __label49
-    * set __tmp114 null
   304 label __label50
   305 set column 1
   306 set row index
 
   319 op land __tmp123 __tmp121 __tmp122
   320 jump __label51 equal __tmp123 false
   321 set icon @pyratite-mixer
-    * set __tmp124 icon
   322 jump __label52 always
   323 label __label51
-    * set __tmp124 null
   324 label __label52
   325 draw color 255 255 255 255
   326 jump __label53 equal e false
 
   351 draw rect __tmp137 __tmp138 2 2
   352 set __tmp127 null
   353 label __label56
-    * set __tmp125 __tmp127
   354 jump __label54 always
   355 label __label53
   356 draw color 255 80 80 255
 
   370 op sub __tmp148 y 1
   371 draw lineRect __tmp147 __tmp148 16 16
   372 draw stroke 2
-    * set __tmp125 null
   373 label __label54
   374 op add __tmp149 x 16
   375 set x __tmp149
 
   379 set red 255
   380 set green 0
   381 set blue 0
-    * set __tmp152 blue
   382 jump __label58 always
   383 label __label57
   384 op greaterThan __tmp153 minimum 6
 
   400 label __label62
   401 set green __tmp158
   402 set blue 0
-    * set __tmp152 blue
   403 label __label58
   404 op greaterThan __tmp159 boost EXPECTED_BOOST
   405 jump __label63 equal __tmp159 false
 
   410 op max __tmp163 192 blue
   411 set blue __tmp163
   412 set boost EXPECTED_BOOST
-    * set __tmp160 boost
   413 jump __label64 always
   414 label __label63
-    * set __tmp160 null
   415 label __label64
   416 op mul __tmp164 BAR_LENGTH boost
   417 op idiv __tmp165 __tmp164 EXPECTED_BOOST
 
   424 draw lineRect x y length 14
   425 op add __tmp168 index 1
   426 set index __tmp168
-    * set __tmp101 index
   427 jump __label44 always
   428 label __label43
-    * set __tmp101 null
   429 label __label44
   430 label __label41
   431 op add __tmp169 n 1
 
   482 label __label69
   483 set __tmp176 null
   484 label __label70
-    * set __tmp173 __tmp176
   485 jump __label68 always
   486 label __label67
-    * set __tmp173 null
   487 label __label68
   488 print "\nNominal production: "
   489 print expected_flow_str
 
   491 print "\nActual production: "
   492 print flow_str
   493 print "/min"
-    * set __tmp171 "/min"
   494 jump __label66 always
   495 label __label65
-    * set __tmp171 null
   496 label __label66
   497 drawflush display1
   498 op sub __tmp191 @time start

Modifications by DeadCodeEliminator, iteration 2:
 
   141 op add __tmp53 x 7
   142 op add __tmp54 y 7
   143 draw image __tmp53 __tmp54 icon 16 0
-    * set __tmp52 null
   144 jump __label29 always
   145 label __label28
   146 draw color 255 80 80 255
 
   160 op add __tmp62 x 4
   161 op add __tmp63 y 6
   162 draw rect __tmp62 __tmp63 2 2
-    * set __tmp52 null
   163 label __label29
   164 jump __label27 always
   165 label __label26
 
   196 set green 0
   197 set blue 255
   198 set minimum a
-    * set __tmp78 minimum
   199 jump __label33 always
   200 label __label32
   201 op greaterThan __tmp79 minimum 20
 
   217 label __label37
   218 set green __tmp84
   219 set blue 0
-    * set __tmp78 blue
   220 label __label33
   221 label __label31
   222 op greaterThan __tmp85 boost EXPECTED_BOOST
 
   325 op add __tmp128 x 7
   326 op add __tmp129 y 7
   327 draw image __tmp128 __tmp129 icon 16 0
-    * set __tmp127 null
   328 jump __label56 always
   329 label __label55
   330 draw color 255 80 80 255
 
   344 op add __tmp137 x 4
   345 op add __tmp138 y 6
   346 draw rect __tmp137 __tmp138 2 2
-    * set __tmp127 null
   347 label __label56
   348 jump __label54 always
   349 label __label53
 
   471 op mul __tmp189 3600 rate
   472 op floor __tmp190 __tmp189
   473 set flow_str __tmp190
-    * set __tmp176 flow_str
   474 jump __label70 always
   475 label __label69
-    * set __tmp176 null
   476 label __label70
   477 jump __label68 always
   478 label __label67

Modifications by SingleStepJumpEliminator, iteration 1:
 
    87 jump __label16 equal __tmp29 false
    88 set minimum s
    89 set icon @sand
-    * jump __label17 always
    90 label __label16
    91 label __label17
    92 op lessThan __tmp31 c minimum
    93 jump __label18 equal __tmp31 false
    94 set minimum c
    95 set icon @coal
-    * jump __label19 always
    96 label __label18
    97 label __label19
    98 op lessThan __tmp33 p minimum
    99 jump __label20 equal __tmp33 false
   100 set minimum p
   101 set icon @pyratite
-    * jump __label21 always
   102 label __label20
   103 label __label21
   104 op greaterThan __tmp35 a 10
 
   108 set showa __tmp38
   109 jump __label22 equal showa false
   110 set icon @silicon
-    * jump __label23 always
   111 label __label22
   112 label __label23
   113 set column 0
 
   127 op land __tmp48 __tmp46 __tmp47
   128 jump __label24 equal __tmp48 false
   129 set icon @silicon-crucible
-    * jump __label25 always
   130 label __label24
   131 label __label25
   132 draw color 255 255 255 255
 
   223 op max __tmp89 192 blue
   224 set blue __tmp89
   225 set boost EXPECTED_BOOST
-    * jump __label39 always
   226 label __label38
   227 label __label39
   228 op mul __tmp90 BAR_LENGTH boost
 
   238 set index __tmp94
   239 op add __tmp95 factories 1
   240 set factories __tmp95
-    * jump __label15 always
   241 label __label14
   242 label __label15
   243 label __label12
 
   274 jump __label45 equal __tmp109 false
   275 set minimum s
   276 set icon @sand
-    * jump __label46 always
   277 label __label45
   278 label __label46
   279 op lessThan __tmp111 c minimum
   280 jump __label47 equal __tmp111 false
   281 set minimum c
   282 set icon @coal
-    * jump __label48 always
   283 label __label47
   284 label __label48
   285 op lessThan __tmp113 l minimum
   286 jump __label49 equal __tmp113 false
   287 set minimum l
   288 set icon @lead
-    * jump __label50 always
   289 label __label49
   290 label __label50
   291 set column 1
 
   305 op land __tmp123 __tmp121 __tmp122
   306 jump __label51 equal __tmp123 false
   307 set icon @pyratite-mixer
-    * jump __label52 always
   308 label __label51
   309 label __label52
   310 draw color 255 255 255 255
 
   393 op max __tmp163 192 blue
   394 set blue __tmp163
   395 set boost EXPECTED_BOOST
-    * jump __label64 always
   396 label __label63
   397 label __label64
   398 op mul __tmp164 BAR_LENGTH boost
 
   406 draw lineRect x y length 14
   407 op add __tmp168 index 1
   408 set index __tmp168
-    * jump __label44 always
   409 label __label43
   410 label __label44
   411 label __label41
 
   458 op mul __tmp189 3600 rate
   459 op floor __tmp190 __tmp189
   460 set flow_str __tmp190
-    * jump __label70 always
   461 label __label69
   462 label __label70
-    * jump __label68 always
   463 label __label67
   464 label __label68
   465 print "\nNominal production: "
 
   468 print "\nActual production: "
   469 print flow_str
   470 print "/min"
-    * jump __label66 always
   471 label __label65
   472 label __label66
   473 drawflush display1

Modifications by OutputTempEliminator, iteration 1:
 
    25 jump __label5 always
    26 label __label4
    27 op mul __tmp6 FROM_INDEX 22
-    * op add __tmp7 4 __tmp6
-    * set __tmp5 __tmp7
+   28 op add __tmp5 4 __tmp6
    29 label __label5
    30 set cly __tmp5
    31 op lessThan __tmp8 TO_INDEX 8
    32 jump __label6 equal __tmp8 false
    33 op mul __tmp10 TO_INDEX 22
-    * op add __tmp11 4 __tmp10
-    * set __tmp9 __tmp11
+   34 op add __tmp9 4 __tmp10
    35 jump __label7 always
    36 label __label6
    37 set __tmp9 176
    38 label __label7
-    * op sub __tmp12 __tmp9 cly
-    * set clh __tmp12
+   39 op sub clh __tmp9 cly
    40 set showa null
    41 set lastRate showa
    42 set flow_str lastRate
 
    47 sensor __tmp13 switch1 @enabled
    48 op equal __tmp14 __tmp13 0
    49 jump __label10 equal __tmp14 false
-    * set __tmp15 @time
-    * set start __tmp15
+   50 set start @time
    51 print "Silicon Factory Monitor"
    52 set factories 0
    53 draw color 0 0 80 255
 
    58 label __label11
    59 op lessThan __tmp16 n @links
    60 jump __label13 equal __tmp16 false
-    * getlink __tmp17 n
-    * set smelter __tmp17
+   61 getlink smelter n
    62 sensor __tmp18 smelter @type
    63 op equal __tmp19 __tmp18 @silicon-crucible
    64 jump __label14 equal __tmp19 false
    65 set minimum 31
-    * sensor __tmp21 smelter @sand
-    * set s __tmp21
-    * sensor __tmp22 smelter @coal
-    * set c __tmp22
-    * sensor __tmp23 smelter @pyratite
-    * set p __tmp23
+   66 sensor s smelter @sand
+   67 sensor c smelter @coal
+   68 sensor p smelter @pyratite
    69 sensor __tmp24 smelter @silicon
-    * op min __tmp25 __tmp24 30
-    * set a __tmp25
-    * sensor __tmp26 smelter @enabled
-    * set e __tmp26
-    * sensor __tmp27 smelter @totalPower
-    * set power __tmp27
-    * sensor __tmp28 smelter @timescale
-    * set boost __tmp28
+   70 op min a __tmp24 30
+   71 sensor e smelter @enabled
+   72 sensor power smelter @totalPower
+   73 sensor boost smelter @timescale
    74 op lessThan __tmp29 s minimum
    75 jump __label16 equal __tmp29 false
    76 set minimum s
 
    92 op greaterThan __tmp35 a 10
    93 op sub __tmp36 31 a
    94 op lessThan __tmp37 __tmp36 minimum
-    * op land __tmp38 __tmp35 __tmp37
-    * set showa __tmp38
+   95 op land showa __tmp35 __tmp37
    96 jump __label22 equal showa false
    97 set icon @silicon
    98 label __label22
 
   100 set column 0
   101 set row index
   102 op mul __tmp40 column BAR_SPACE
-    * op add __tmp41 5 __tmp40
-    * set x __tmp41
+  103 op add x 5 __tmp40
   104 op mul __tmp42 row 22
-    * op add __tmp43 4 __tmp42
-    * set y __tmp43
+  105 op add y 4 __tmp42
   106 draw color 0 0 80 255
   107 op sub __tmp44 x 1
   108 op sub __tmp45 y 1
 
   161 draw lineRect __tmp72 __tmp73 16 16
   162 draw stroke 2
   163 label __label27
-    * op add __tmp74 x 16
-    * set x __tmp74
+  164 op add x x 16
   165 op mul __tmp75 power e
   166 op equal __tmp76 __tmp75 0
   167 jump __label30 equal __tmp76 false
 
   200 label __label31
   201 op greaterThan __tmp85 boost EXPECTED_BOOST
   202 jump __label38 equal __tmp85 false
-    * op max __tmp87 192 red
-    * set red __tmp87
-    * op max __tmp88 192 green
-    * set green __tmp88
-    * op max __tmp89 192 blue
-    * set blue __tmp89
+  203 op max red 192 red
+  204 op max green 192 green
+  205 op max blue 192 blue
   206 set boost EXPECTED_BOOST
   207 label __label38
   208 label __label39
   209 op mul __tmp90 BAR_LENGTH boost
-    * op idiv __tmp91 __tmp90 EXPECTED_BOOST
-    * set length __tmp91
+  210 op idiv length __tmp90 EXPECTED_BOOST
   211 draw color red green blue 128
   212 op mul __tmp92 minimum length
   213 op idiv __tmp93 __tmp92 30
   214 draw rect x y __tmp93 14
   215 draw color red green blue 255
   216 draw lineRect x y length 14
-    * op add __tmp94 index 1
-    * set index __tmp94
-    * op add __tmp95 factories 1
-    * set factories __tmp95
+  217 op add index index 1
+  218 op add factories factories 1
   219 label __label14
   220 label __label15
   221 label __label12
-    * op add __tmp96 n 1
-    * set n __tmp96
+  222 op add n n 1
   223 jump __label11 always
   224 label __label13
   225 set index FROM_INDEX
 
   227 label __label40
   228 op lessThan __tmp97 n @links
   229 jump __label42 equal __tmp97 false
-    * getlink __tmp98 n
-    * set smelter __tmp98
+  230 getlink smelter n
   231 sensor __tmp99 smelter @type
   232 op equal __tmp100 __tmp99 @pyratite-mixer
   233 jump __label43 equal __tmp100 false
   234 set minimum 11
-    * sensor __tmp102 smelter @sand
-    * set s __tmp102
-    * sensor __tmp103 smelter @coal
-    * set c __tmp103
-    * sensor __tmp104 smelter @lead
-    * set l __tmp104
-    * sensor __tmp105 smelter @pyratite
-    * set a __tmp105
-    * sensor __tmp106 smelter @enabled
-    * set e __tmp106
-    * sensor __tmp107 smelter @totalPower
-    * set power __tmp107
-    * sensor __tmp108 smelter @timescale
-    * set boost __tmp108
+  235 sensor s smelter @sand
+  236 sensor c smelter @coal
+  237 sensor l smelter @lead
+  238 sensor a smelter @pyratite
+  239 sensor e smelter @enabled
+  240 sensor power smelter @totalPower
+  241 sensor boost smelter @timescale
   242 op lessThan __tmp109 s minimum
   243 jump __label45 equal __tmp109 false
   244 set minimum s
 
   260 set column 1
   261 set row index
   262 op mul __tmp115 column BAR_SPACE
-    * op add __tmp116 5 __tmp115
-    * set x __tmp116
+  263 op add x 5 __tmp115
   264 op mul __tmp117 row 22
-    * op add __tmp118 4 __tmp117
-    * set y __tmp118
+  265 op add y 4 __tmp117
   266 draw color 0 0 80 255
   267 op sub __tmp119 x 1
   268 op sub __tmp120 y 1
 
   321 draw lineRect __tmp147 __tmp148 16 16
   322 draw stroke 2
   323 label __label54
-    * op add __tmp149 x 16
-    * set x __tmp149
+  324 op add x x 16
   325 op mul __tmp150 power e
   326 op equal __tmp151 __tmp150 0
   327 jump __label57 equal __tmp151 false
 
   352 label __label58
   353 op greaterThan __tmp159 boost EXPECTED_BOOST
   354 jump __label63 equal __tmp159 false
-    * op max __tmp161 192 red
-    * set red __tmp161
-    * op max __tmp162 192 green
-    * set green __tmp162
-    * op max __tmp163 192 blue
-    * set blue __tmp163
+  355 op max red 192 red
+  356 op max green 192 green
+  357 op max blue 192 blue
   358 set boost EXPECTED_BOOST
   359 label __label63
   360 label __label64
   361 op mul __tmp164 BAR_LENGTH boost
-    * op idiv __tmp165 __tmp164 EXPECTED_BOOST
-    * set length __tmp165
+  362 op idiv length __tmp164 EXPECTED_BOOST
   363 draw color red green blue 128
   364 op mul __tmp166 minimum length
   365 op idiv __tmp167 __tmp166 10
   366 draw rect x y __tmp167 14
   367 draw color red green blue 255
   368 draw lineRect x y length 14
-    * op add __tmp168 index 1
-    * set index __tmp168
+  369 op add index index 1
   370 label __label43
   371 label __label44
   372 label __label41
-    * op add __tmp169 n 1
-    * set n __tmp169
+  373 op add n n 1
   374 jump __label40 always
   375 label __label42
   376 op notEqual __tmp170 bank1 null
   377 jump __label65 equal __tmp170 false
   378 op equal __tmp172 FROM_INDEX 0
   379 jump __label67 equal __tmp172 false
-    * read __tmp174 bank1 511
-    * set rate __tmp174
+  380 read rate bank1 511
   381 op notEqual __tmp175 lastRate rate
   382 jump __label69 equal __tmp175 false
   383 op mul __tmp177 EXPECTED_BOOST factories
-    * op div __tmp178 __tmp177 11.25
-    * set expected_flow __tmp178
+  384 op div expected_flow __tmp177 11.25
   385 op mul __tmp179 expected_flow 3600
-    * op floor __tmp180 __tmp179
-    * set expected_flow_str __tmp180
+  386 op floor expected_flow_str __tmp179
   387 set lastRate rate
   388 draw color 0 0 80 255
   389 draw rect 156 0 16 176
 
   401 op sub __tmp181 rate expected_flow
   402 op mul __tmp182 84 __tmp181
   403 op div __tmp183 __tmp182 expected_flow
-    * op add __tmp184 88 __tmp183
-    * set pos __tmp184
+  404 op add pos 88 __tmp183
   405 op max __tmp185 pos 4
-    * op min __tmp186 __tmp185 170
-    * set pos __tmp186
-    * op add __tmp187 pos 7
-    * set pos1 __tmp187
-    * op sub __tmp188 pos 7
-    * set pos2 __tmp188
+  406 op min pos __tmp185 170
+  407 op add pos1 pos 7
+  408 op sub pos2 pos 7
   409 draw color 255 255 16 255
   410 draw triangle 156 pos1 164 pos 156 pos2
   411 op mul __tmp189 3600 rate
-    * op floor __tmp190 __tmp189
-    * set flow_str __tmp190
+  412 op floor flow_str __tmp189
   413 label __label69
   414 label __label70
   415 label __label67

Modifications by ExpressionOptimizer, iteration 1:
 
   382 jump __label69 equal __tmp175 false
   383 op mul __tmp177 EXPECTED_BOOST factories
   384 op div expected_flow __tmp177 11.25
-    * op mul __tmp179 expected_flow 3600
-    * op floor expected_flow_str __tmp179
+  385 op idiv expected_flow_str expected_flow 0.0002777777777777778
   386 set lastRate rate
   387 draw color 0 0 80 255
   388 draw rect 156 0 16 176
 
   407 op sub pos2 pos 7
   408 draw color 255 255 16 255
   409 draw triangle 156 pos1 164 pos 156 pos2
-    * op mul __tmp189 3600 rate
-    * op floor flow_str __tmp189
+  410 op idiv flow_str rate 0.0002777777777777778
   411 label __label69
   412 label __label70
   413 label __label67

Modifications by ImproveNegativeConditionalJumps, iteration 1:
 
     1 set TO_INDEX 8
     2 set EXPECTED_BOOST 1.5
     3 draw clear 0 0 80
-    * op notEqual __tmp0 bank1 null
-    * jump __label0 equal __tmp0 false
+    4 jump __label0 equal bank1 null
     5 set BAR_LENGTH 53
     6 set BAR_SPACE 74
     7 jump __label1 always
 
    10 set BAR_SPACE 88
    11 label __label1
    12 set clx 0
-    * op notEqual __tmp2 bank1 null
-    * jump __label2 equal __tmp2 false
+   13 jump __label2 equal bank1 null
    14 set __tmp3 156
    15 jump __label3 always
    16 label __label2
    17 set __tmp3 176
    18 label __label3
    19 set clw __tmp3
-    * op equal __tmp4 FROM_INDEX 0
-    * jump __label4 equal __tmp4 false
+   20 jump __label4 notEqual FROM_INDEX 0
    21 set __tmp5 0
    22 jump __label5 always
    23 label __label4
 
    25 op add __tmp5 4 __tmp6
    26 label __label5
    27 set cly __tmp5
-    * op lessThan __tmp8 TO_INDEX 8
-    * jump __label6 equal __tmp8 false
+   28 jump __label6 greaterThanEq TO_INDEX 8
    29 op mul __tmp10 TO_INDEX 22
    30 op add __tmp9 4 __tmp10
    31 jump __label7 always
 
    41 control enabled switch1 0
    42 label __label8
    43 sensor __tmp13 switch1 @enabled
-    * op equal __tmp14 __tmp13 0
-    * jump __label10 equal __tmp14 false
+   44 jump __label10 notEqual __tmp13 0
    45 set start @time
    46 print "Silicon Factory Monitor"
    47 set factories 0
 
    51 set index FROM_INDEX
    52 set n 0
    53 label __label11
-    * op lessThan __tmp16 n @links
-    * jump __label13 equal __tmp16 false
+   54 jump __label13 greaterThanEq n @links
    55 getlink smelter n
    56 sensor __tmp18 smelter @type
-    * op equal __tmp19 __tmp18 @silicon-crucible
-    * jump __label14 equal __tmp19 false
+   57 jump __label14 notEqual __tmp18 @silicon-crucible
    58 set minimum 31
    59 sensor s smelter @sand
    60 sensor c smelter @coal
 
    64 sensor e smelter @enabled
    65 sensor power smelter @totalPower
    66 sensor boost smelter @timescale
-    * op lessThan __tmp29 s minimum
-    * jump __label16 equal __tmp29 false
+   67 jump __label16 greaterThanEq s minimum
    68 set minimum s
    69 set icon @sand
    70 label __label16
    71 label __label17
-    * op lessThan __tmp31 c minimum
-    * jump __label18 equal __tmp31 false
+   72 jump __label18 greaterThanEq c minimum
    73 set minimum c
    74 set icon @coal
    75 label __label18
    76 label __label19
-    * op lessThan __tmp33 p minimum
-    * jump __label20 equal __tmp33 false
+   77 jump __label20 greaterThanEq p minimum
    78 set minimum p
    79 set icon @pyratite
    80 label __label20
 
   106 label __label25
   107 draw color 255 255 255 255
   108 jump __label26 equal e false
-    * op greaterThan __tmp51 power 0
-    * jump __label28 equal __tmp51 false
+  109 jump __label28 lessThanEq power 0
   110 op add __tmp53 x 7
   111 op add __tmp54 y 7
   112 draw image __tmp53 __tmp54 icon 16 0
 
   152 label __label27
   153 op add x x 16
   154 op mul __tmp75 power e
-    * op equal __tmp76 __tmp75 0
-    * jump __label30 equal __tmp76 false
+  155 jump __label30 notEqual __tmp75 0
   156 set red 255
   157 set green 0
   158 set blue 0
 
   175 set __tmp82 255
   176 label __label35
   177 set red __tmp82
-    * op greaterThan __tmp83 minimum 10
-    * jump __label36 equal __tmp83 false
+  178 jump __label36 lessThanEq minimum 10
   179 set __tmp84 255
   180 jump __label37 always
   181 label __label36
 
   185 set blue 0
   186 label __label33
   187 label __label31
-    * op greaterThan __tmp85 boost EXPECTED_BOOST
-    * jump __label38 equal __tmp85 false
+  188 jump __label38 lessThanEq boost EXPECTED_BOOST
   189 op max red 192 red
   190 op max green 192 green
   191 op max blue 192 blue
 
   211 set index FROM_INDEX
   212 set n 0
   213 label __label40
-    * op lessThan __tmp97 n @links
-    * jump __label42 equal __tmp97 false
+  214 jump __label42 greaterThanEq n @links
   215 getlink smelter n
   216 sensor __tmp99 smelter @type
-    * op equal __tmp100 __tmp99 @pyratite-mixer
-    * jump __label43 equal __tmp100 false
+  217 jump __label43 notEqual __tmp99 @pyratite-mixer
   218 set minimum 11
   219 sensor s smelter @sand
   220 sensor c smelter @coal
 
   223 sensor e smelter @enabled
   224 sensor power smelter @totalPower
   225 sensor boost smelter @timescale
-    * op lessThan __tmp109 s minimum
-    * jump __label45 equal __tmp109 false
+  226 jump __label45 greaterThanEq s minimum
   227 set minimum s
   228 set icon @sand
   229 label __label45
   230 label __label46
-    * op lessThan __tmp111 c minimum
-    * jump __label47 equal __tmp111 false
+  231 jump __label47 greaterThanEq c minimum
   232 set minimum c
   233 set icon @coal
   234 label __label47
   235 label __label48
-    * op lessThan __tmp113 l minimum
-    * jump __label49 equal __tmp113 false
+  236 jump __label49 greaterThanEq l minimum
   237 set minimum l
   238 set icon @lead
   239 label __label49
 
   257 label __label52
   258 draw color 255 255 255 255
   259 jump __label53 equal e false
-    * op greaterThan __tmp126 power 0
-    * jump __label55 equal __tmp126 false
+  260 jump __label55 lessThanEq power 0
   261 op add __tmp128 x 7
   262 op add __tmp129 y 7
   263 draw image __tmp128 __tmp129 icon 16 0
 
   303 label __label54
   304 op add x x 16
   305 op mul __tmp150 power e
-    * op equal __tmp151 __tmp150 0
-    * jump __label57 equal __tmp151 false
+  306 jump __label57 notEqual __tmp150 0
   307 set red 255
   308 set green 0
   309 set blue 0
 
   319 set __tmp156 255
   320 label __label60
   321 set red __tmp156
-    * op greaterThan __tmp157 minimum 3
-    * jump __label61 equal __tmp157 false
+  322 jump __label61 lessThanEq minimum 3
   323 set __tmp158 255
   324 jump __label62 always
   325 label __label61
 
   328 set green __tmp158
   329 set blue 0
   330 label __label58
-    * op greaterThan __tmp159 boost EXPECTED_BOOST
-    * jump __label63 equal __tmp159 false
+  331 jump __label63 lessThanEq boost EXPECTED_BOOST
   332 op max red 192 red
   333 op max green 192 green
   334 op max blue 192 blue
 
   350 op add n n 1
   351 jump __label40 always
   352 label __label42
-    * op notEqual __tmp170 bank1 null
-    * jump __label65 equal __tmp170 false
-    * op equal __tmp172 FROM_INDEX 0
-    * jump __label67 equal __tmp172 false
+  353 jump __label65 equal bank1 null
+  354 jump __label67 notEqual FROM_INDEX 0
   355 read rate bank1 511
-    * op notEqual __tmp175 lastRate rate
-    * jump __label69 equal __tmp175 false
+  356 jump __label69 equal lastRate rate
   357 op mul __tmp177 EXPECTED_BOOST factories
   358 op div expected_flow __tmp177 11.25
   359 op idiv expected_flow_str expected_flow 0.0002777777777777778

Modifications by LoopOptimizer, iteration 1:
 
    42 label __label8
    43 sensor __tmp13 switch1 @enabled
    44 jump __label10 notEqual __tmp13 0
+   45 label __label71
    46 set start @time
    47 print "Silicon Factory Monitor"
    48 set factories 0
 
    53 set n 0
    54 label __label11
    55 jump __label13 greaterThanEq n @links
+   56 label __label72
    57 getlink smelter n
    58 sensor __tmp18 smelter @type
    59 jump __label14 notEqual __tmp18 @silicon-crucible
 
   208 label __label15
   209 label __label12
   210 op add n n 1
-    * jump __label11 always
+  211 jump __label72 lessThan n @links
   212 label __label13
   213 set index FROM_INDEX
   214 set n 0
   215 label __label40
   216 jump __label42 greaterThanEq n @links
+  217 label __label73
   218 getlink smelter n
   219 sensor __tmp99 smelter @type
   220 jump __label43 notEqual __tmp99 @pyratite-mixer
 
   351 label __label44
   352 label __label41
   353 op add n n 1
-    * jump __label40 always
+  354 jump __label73 lessThan n @links
   355 label __label42
   356 jump __label65 equal bank1 null
   357 jump __label67 notEqual FROM_INDEX 0
 
   405 print " ms"
   406 printflush message1
   407 label __label9
-    * jump __label8 always
+  408 sensor __tmp13 switch1 @enabled
+  409 jump __label71 equal __tmp13 0
   410 label __label10
   411 end

Modifications by IfExpressionOptimizer, iteration 1:
 
    10 set BAR_SPACE 88
    11 label __label1
    12 set clx 0
-    * jump __label2 equal bank1 null
-    * set __tmp3 156
+   13 set clw 176
+   14 jump __label3 equal bank1 null
+   15 set clw 156
    16 jump __label3 always
-    * label __label2
-    * set __tmp3 176
    17 label __label3
-    * set clw __tmp3
-    * jump __label4 notEqual FROM_INDEX 0
-    * set __tmp5 0
-    * jump __label5 always
+   18 set cly 0
+   19 jump __label5 equal FROM_INDEX 0
    20 label __label4
    21 op mul __tmp6 FROM_INDEX 22
-    * op add __tmp5 4 __tmp6
+   22 op add cly 4 __tmp6
    23 label __label5
-    * set cly __tmp5
-    * jump __label6 greaterThanEq TO_INDEX 8
+   24 set __tmp9 176
+   25 jump __label7 greaterThanEq TO_INDEX 8
    26 op mul __tmp10 TO_INDEX 22
    27 op add __tmp9 4 __tmp10
    28 jump __label7 always
-    * label __label6
-    * set __tmp9 176
    29 label __label7
    30 op sub clh __tmp9 cly
    31 set showa null
 
   162 set minimum a
   163 jump __label33 always
   164 label __label32
+  165 set red 255
   166 op greaterThan __tmp79 minimum 20
   167 op greaterThanEq __tmp80 boost EXPECTED_BOOST
   168 op land __tmp81 __tmp79 __tmp80
-    * jump __label34 equal __tmp81 false
-    * set __tmp82 0
+  169 jump __label35 equal __tmp81 false
+  170 set red 0
   171 jump __label35 always
-    * label __label34
-    * set __tmp82 255
   172 label __label35
-    * set red __tmp82
-    * jump __label36 lessThanEq minimum 10
-    * set __tmp84 255
+  173 set green 0
+  174 jump __label37 lessThanEq minimum 10
+  175 set green 255
   176 jump __label37 always
-    * label __label36
-    * set __tmp84 0
   177 label __label37
-    * set green __tmp84
   178 set blue 0
   179 label __label33
   180 label __label31
 
   303 set blue 0
   304 jump __label58 always
   305 label __label57
+  306 set red 255
   307 op greaterThan __tmp153 minimum 6
   308 op greaterThanEq __tmp154 boost EXPECTED_BOOST
   309 op land __tmp155 __tmp153 __tmp154
-    * jump __label59 equal __tmp155 false
-    * set __tmp156 0
+  310 jump __label60 equal __tmp155 false
+  311 set red 0
   312 jump __label60 always
-    * label __label59
-    * set __tmp156 255
   313 label __label60
-    * set red __tmp156
-    * jump __label61 lessThanEq minimum 3
-    * set __tmp158 255
+  314 set green 0
+  315 jump __label62 lessThanEq minimum 3
+  316 set green 255
   317 jump __label62 always
-    * label __label61
-    * set __tmp158 0
   318 label __label62
-    * set green __tmp158
   319 set blue 0
   320 label __label58
   321 jump __label63 lessThanEq boost EXPECTED_BOOST

Modifications by DataFlowOptimizer, iteration 1:
 
    29 label __label7
    30 op sub clh __tmp9 cly
    31 set showa null
-    * set lastRate showa
-    * set flow_str lastRate
-    * set expected_flow_str flow_str
-    * set icon expected_flow_str
+   32 set lastRate null
+   33 set flow_str showa
+   34 set expected_flow_str lastRate
+   35 set icon flow_str
    36 control enabled switch1 0
    37 label __label8
    38 sensor __tmp13 switch1 @enabled
 
    42 print "Silicon Factory Monitor"
    43 set factories 0
    44 draw color 0 0 80 255
-    * draw rect clx cly clw clh
+   45 draw rect 0 cly clw clh
    46 draw stroke 2
    47 set index FROM_INDEX
    48 set n 0
    49 label __label11
-    * jump __label13 greaterThanEq n @links
+   50 jump __label13 greaterThanEq 0 @links
    51 label __label72
    52 getlink smelter n
    53 sensor __tmp18 smelter @type
 
    61 sensor e smelter @enabled
    62 sensor power smelter @totalPower
    63 sensor boost smelter @timescale
-    * jump __label16 greaterThanEq s minimum
+   64 jump __label16 greaterThanEq s 31
    65 set minimum s
    66 set icon @sand
    67 label __label16
 
    86 label __label23
    87 set column 0
    88 set row index
-    * op mul __tmp40 column BAR_SPACE
+   89 op mul __tmp40 0 BAR_SPACE
    90 op add x 5 __tmp40
-    * op mul __tmp42 row 22
+   91 op mul __tmp42 index 22
    92 op add y 4 __tmp42
    93 draw color 0 0 80 255
-    * op sub __tmp44 x 1
-    * op sub __tmp45 y 1
+   94 op add __tmp44 __tmp40 4
+   95 op add __tmp45 __tmp42 3
    96 draw rect __tmp44 __tmp45 BAR_SPACE 16
    97 op greaterThan __tmp46 minimum 26
    98 op equal __tmp47 showa 0
 
   104 draw color 255 255 255 255
   105 jump __label26 equal e false
   106 jump __label28 lessThanEq power 0
-    * op add __tmp53 x 7
-    * op add __tmp54 y 7
+  107 op add __tmp53 __tmp40 12
+  108 op add __tmp54 __tmp42 11
   109 draw image __tmp53 __tmp54 icon 16 0
   110 jump __label29 always
   111 label __label28
   112 draw color 255 80 80 255
-    * op add __tmp55 y 3
+  113 op add __tmp55 __tmp42 7
   114 draw rect x __tmp55 14 8
   115 draw color 0 0 0 255
-    * op add __tmp56 x 2
-    * op add __tmp57 y 5
+  116 op add __tmp56 __tmp40 7
+  117 op add __tmp57 __tmp42 9
   118 draw rect __tmp56 __tmp57 8 4
-    * op add __tmp58 x 12
-    * op add __tmp59 y 3
-    * draw rect __tmp58 __tmp59 2 2
-    * op add __tmp60 x 12
-    * op add __tmp61 y 9
-    * draw rect __tmp60 __tmp61 2 2
+  119 op add __tmp58 __tmp40 17
+  120 op add __tmp59 __tmp42 7
+  121 draw rect __tmp58 __tmp55 2 2
+  122 op add __tmp60 __tmp40 17
+  123 op add __tmp61 __tmp42 13
+  124 draw rect __tmp58 __tmp61 2 2
   125 draw color 255 80 80 255
-    * op add __tmp62 x 4
-    * op add __tmp63 y 6
+  126 op add __tmp62 __tmp40 9
+  127 op add __tmp63 __tmp42 10
   128 draw rect __tmp62 __tmp63 2 2
   129 label __label29
   130 jump __label27 always
   131 label __label26
   132 draw color 255 80 80 255
   133 draw stroke 3
-    * op add __tmp64 x 2
-    * op add __tmp65 y 12
-    * op add __tmp66 x 12
-    * op add __tmp67 y 2
+  134 op add __tmp64 __tmp40 7
+  135 op add __tmp65 __tmp42 16
+  136 op add __tmp66 __tmp40 17
+  137 op add __tmp67 __tmp42 6
   138 draw line __tmp64 __tmp65 __tmp66 __tmp67
-    * op add __tmp68 x 2
-    * op add __tmp69 y 2
-    * op add __tmp70 x 12
-    * op add __tmp71 y 12
-    * draw line __tmp68 __tmp69 __tmp70 __tmp71
+  139 op add __tmp68 __tmp40 7
+  140 op add __tmp69 __tmp42 6
+  141 op add __tmp70 __tmp40 17
+  142 op add __tmp71 __tmp42 16
+  143 draw line __tmp64 __tmp67 __tmp66 __tmp65
   144 draw color 0 0 0 255
-    * op sub __tmp72 x 1
-    * op sub __tmp73 y 1
-    * draw lineRect __tmp72 __tmp73 16 16
+  145 op add __tmp72 __tmp40 4
+  146 op add __tmp73 __tmp42 3
+  147 draw lineRect __tmp44 __tmp45 16 16
   148 draw stroke 2
   149 label __label27
   150 op add x x 16
 
   204 set index FROM_INDEX
   205 set n 0
   206 label __label40
-    * jump __label42 greaterThanEq n @links
+  207 jump __label42 greaterThanEq 0 @links
   208 label __label73
   209 getlink smelter n
   210 sensor __tmp99 smelter @type
 
   217 sensor e smelter @enabled
   218 sensor power smelter @totalPower
   219 sensor boost smelter @timescale
-    * jump __label45 greaterThanEq s minimum
+  220 jump __label45 greaterThanEq s 11
   221 set minimum s
   222 set icon @sand
   223 label __label45
 
   234 label __label50
   235 set column 1
   236 set row index
-    * op mul __tmp115 column BAR_SPACE
+  237 op mul __tmp115 1 BAR_SPACE
   238 op add x 5 __tmp115
-    * op mul __tmp117 row 22
+  239 op mul __tmp117 index 22
   240 op add y 4 __tmp117
   241 draw color 0 0 80 255
-    * op sub __tmp119 x 1
-    * op sub __tmp120 y 1
+  242 op add __tmp119 __tmp115 4
+  243 op add __tmp120 __tmp117 3
   244 draw rect __tmp119 __tmp120 BAR_SPACE 16
   245 op greaterThan __tmp121 minimum 6
   246 op equal __tmp122 showa 0
 
   252 draw color 255 255 255 255
   253 jump __label53 equal e false
   254 jump __label55 lessThanEq power 0
-    * op add __tmp128 x 7
-    * op add __tmp129 y 7
+  255 op add __tmp128 __tmp115 12
+  256 op add __tmp129 __tmp117 11
   257 draw image __tmp128 __tmp129 icon 16 0
   258 jump __label56 always
   259 label __label55
   260 draw color 255 80 80 255
-    * op add __tmp130 y 3
+  261 op add __tmp130 __tmp117 7
   262 draw rect x __tmp130 14 8
   263 draw color 0 0 0 255
-    * op add __tmp131 x 2
-    * op add __tmp132 y 5
+  264 op add __tmp131 __tmp115 7
+  265 op add __tmp132 __tmp117 9
   266 draw rect __tmp131 __tmp132 8 4
-    * op add __tmp133 x 12
-    * op add __tmp134 y 3
-    * draw rect __tmp133 __tmp134 2 2
-    * op add __tmp135 x 12
-    * op add __tmp136 y 9
-    * draw rect __tmp135 __tmp136 2 2
+  267 op add __tmp133 __tmp115 17
+  268 op add __tmp134 __tmp117 7
+  269 draw rect __tmp133 __tmp130 2 2
+  270 op add __tmp135 __tmp115 17
+  271 op add __tmp136 __tmp117 13
+  272 draw rect __tmp133 __tmp136 2 2
   273 draw color 255 80 80 255
-    * op add __tmp137 x 4
-    * op add __tmp138 y 6
+  274 op add __tmp137 __tmp115 9
+  275 op add __tmp138 __tmp117 10
   276 draw rect __tmp137 __tmp138 2 2
   277 label __label56
   278 jump __label54 always
   279 label __label53
   280 draw color 255 80 80 255
   281 draw stroke 3
-    * op add __tmp139 x 2
-    * op add __tmp140 y 12
-    * op add __tmp141 x 12
-    * op add __tmp142 y 2
+  282 op add __tmp139 __tmp115 7
+  283 op add __tmp140 __tmp117 16
+  284 op add __tmp141 __tmp115 17
+  285 op add __tmp142 __tmp117 6
   286 draw line __tmp139 __tmp140 __tmp141 __tmp142
-    * op add __tmp143 x 2
-    * op add __tmp144 y 2
-    * op add __tmp145 x 12
-    * op add __tmp146 y 12
-    * draw line __tmp143 __tmp144 __tmp145 __tmp146
+  287 op add __tmp143 __tmp115 7
+  288 op add __tmp144 __tmp117 6
+  289 op add __tmp145 __tmp115 17
+  290 op add __tmp146 __tmp117 16
+  291 draw line __tmp139 __tmp142 __tmp141 __tmp140
   292 draw color 0 0 0 255
-    * op sub __tmp147 x 1
-    * op sub __tmp148 y 1
-    * draw lineRect __tmp147 __tmp148 16 16
+  293 op add __tmp147 __tmp115 4
+  294 op add __tmp148 __tmp117 3
+  295 draw lineRect __tmp119 __tmp120 16 16
   296 draw stroke 2
   297 label __label54
   298 op add x x 16
 
   306 set red 255
   307 op greaterThan __tmp153 minimum 6
   308 op greaterThanEq __tmp154 boost EXPECTED_BOOST
-    * op land __tmp155 __tmp153 __tmp154
+  309 op land __tmp155 __tmp121 __tmp154
   310 jump __label60 equal __tmp155 false
   311 set red 0
   312 jump __label60 always
 
   321 jump __label63 lessThanEq boost EXPECTED_BOOST
   322 op max red 192 red
   323 op max green 192 green
-    * op max blue 192 blue
+  324 op max blue 192 0
   325 set boost EXPECTED_BOOST
   326 label __label63
   327 label __label64

Modifications by DataFlowOptimizer, iteration 2:
 
     9 set BAR_LENGTH 61
    10 set BAR_SPACE 88
    11 label __label1
-    * set clx 0
    12 set clw 176
    13 jump __label3 equal bank1 null
    14 set clw 156
 
    29 op sub clh __tmp9 cly
    30 set showa null
    31 set lastRate null
-    * set flow_str showa
-    * set expected_flow_str lastRate
-    * set icon flow_str
+   32 set flow_str null
+   33 set expected_flow_str null
+   34 set icon showa
    35 control enabled switch1 0
    36 label __label8
    37 sensor __tmp13 switch1 @enabled
 
    83 set icon @silicon
    84 label __label22
    85 label __label23
-    * set column 0
-    * set row index
    86 op mul __tmp40 0 BAR_SPACE
    87 op add x 5 __tmp40
    88 op mul __tmp42 index 22
 
   114 op add __tmp57 __tmp42 9
   115 draw rect __tmp56 __tmp57 8 4
   116 op add __tmp58 __tmp40 17
-    * op add __tmp59 __tmp42 7
   117 draw rect __tmp58 __tmp55 2 2
-    * op add __tmp60 __tmp40 17
   118 op add __tmp61 __tmp42 13
   119 draw rect __tmp58 __tmp61 2 2
   120 draw color 255 80 80 255
 
   131 op add __tmp66 __tmp40 17
   132 op add __tmp67 __tmp42 6
   133 draw line __tmp64 __tmp65 __tmp66 __tmp67
-    * op add __tmp68 __tmp40 7
-    * op add __tmp69 __tmp42 6
-    * op add __tmp70 __tmp40 17
-    * op add __tmp71 __tmp42 16
   134 draw line __tmp64 __tmp67 __tmp66 __tmp65
   135 draw color 0 0 0 255
-    * op add __tmp72 __tmp40 4
-    * op add __tmp73 __tmp42 3
   136 draw lineRect __tmp44 __tmp45 16 16
   137 draw stroke 2
   138 label __label27
 
   221 set icon @lead
   222 label __label49
   223 label __label50
-    * set column 1
-    * set row index
   224 op mul __tmp115 1 BAR_SPACE
   225 op add x 5 __tmp115
   226 op mul __tmp117 index 22
 
   252 op add __tmp132 __tmp117 9
   253 draw rect __tmp131 __tmp132 8 4
   254 op add __tmp133 __tmp115 17
-    * op add __tmp134 __tmp117 7
   255 draw rect __tmp133 __tmp130 2 2
-    * op add __tmp135 __tmp115 17
   256 op add __tmp136 __tmp117 13
   257 draw rect __tmp133 __tmp136 2 2
   258 draw color 255 80 80 255
 
   269 op add __tmp141 __tmp115 17
   270 op add __tmp142 __tmp117 6
   271 draw line __tmp139 __tmp140 __tmp141 __tmp142
-    * op add __tmp143 __tmp115 7
-    * op add __tmp144 __tmp117 6
-    * op add __tmp145 __tmp115 17
-    * op add __tmp146 __tmp117 16
   272 draw line __tmp139 __tmp142 __tmp141 __tmp140
   273 draw color 0 0 0 255
-    * op add __tmp147 __tmp115 4
-    * op add __tmp148 __tmp117 3
   274 draw lineRect __tmp119 __tmp120 16 16
   275 draw stroke 2
   276 label __label54
 
   283 jump __label58 always
   284 label __label57
   285 set red 255
-    * op greaterThan __tmp153 minimum 6
   286 op greaterThanEq __tmp154 boost EXPECTED_BOOST
   287 op land __tmp155 __tmp121 __tmp154
   288 jump __label60 equal __tmp155 false

Modifications by DataFlowOptimizer, iteration 3:
 
    31 set lastRate null
    32 set flow_str null
    33 set expected_flow_str null
-    * set icon showa
+   34 set icon null
    35 control enabled switch1 0
    36 label __label8
    37 sensor __tmp13 switch1 @enabled

Modifications by PropagateJumpTargets, iteration 1:
 
   104 op add __tmp53 __tmp40 12
   105 op add __tmp54 __tmp42 11
   106 draw image __tmp53 __tmp54 icon 16 0
-    * jump __label29 always
+  107 jump __label27 always
   108 label __label28
   109 draw color 255 80 80 255
   110 op add __tmp55 __tmp42 7
 
   242 op add __tmp128 __tmp115 12
   243 op add __tmp129 __tmp117 11
   244 draw image __tmp128 __tmp129 icon 16 0
-    * jump __label56 always
+  245 jump __label54 always
   246 label __label55
   247 draw color 255 80 80 255
   248 op add __tmp130 __tmp117 7

Modifications by SingleStepJumpEliminator, iteration 1:
 
    12 set clw 176
    13 jump __label3 equal bank1 null
    14 set clw 156
-    * jump __label3 always
    15 label __label3
    16 set cly 0
    17 jump __label5 equal FROM_INDEX 0
 
    23 jump __label7 greaterThanEq TO_INDEX 8
    24 op mul __tmp10 TO_INDEX 22
    25 op add __tmp9 4 __tmp10
-    * jump __label7 always
    26 label __label7
    27 op sub clh __tmp9 cly
    28 set showa null
 
   155 op land __tmp81 __tmp79 __tmp80
   156 jump __label35 equal __tmp81 false
   157 set red 0
-    * jump __label35 always
   158 label __label35
   159 set green 0
   160 jump __label37 lessThanEq minimum 10
   161 set green 255
-    * jump __label37 always
   162 label __label37
   163 set blue 0
   164 label __label33
 
   283 op land __tmp155 __tmp121 __tmp154
   284 jump __label60 equal __tmp155 false
   285 set red 0
-    * jump __label60 always
   286 label __label60
   287 set green 0
   288 jump __label62 lessThanEq minimum 3
   289 set green 255
-    * jump __label62 always
   290 label __label62
   291 set blue 0
   292 label __label58

Modifications by PrintMerger, iteration 1:
 
   350 label __label68
   351 print "\nNominal production: "
   352 print expected_flow_str
-    * print "/min"
-    * print "\nActual production: "
+  353 print "/min\nActual production: "
   354 print flow_str
   355 print "/min"
   356 label __label65

Final code before resolving virtual instructions:

set FROM_INDEX 0
set TO_INDEX 8
set EXPECTED_BOOST 1.5
draw clear 0 0 80 0 0 0
jump __label0 equal bank1 null
set BAR_LENGTH 53
set BAR_SPACE 74
jump __label1 always 0 0
label __label0
set BAR_LENGTH 61
set BAR_SPACE 88
label __label1
set clw 176
jump __label3 equal bank1 null
set clw 156
label __label3
set cly 0
jump __label5 equal FROM_INDEX 0
label __label4
op mul __tmp6 FROM_INDEX 22
op add cly 4 __tmp6
label __label5
set __tmp9 176
jump __label7 greaterThanEq TO_INDEX 8
op mul __tmp10 TO_INDEX 22
op add __tmp9 4 __tmp10
label __label7
op sub clh __tmp9 cly
set showa null
set lastRate null
set flow_str null
set expected_flow_str null
set icon null
control enabled switch1 0 0 0 0
label __label8
sensor __tmp13 switch1 @enabled
jump __label10 notEqual __tmp13 0
label __label71
set start @time
print "Silicon Factory Monitor"
set factories 0
draw color 0 0 80 255 0 0
draw rect 0 cly clw clh 0 0
draw stroke 2 0 0 0 0 0
set index FROM_INDEX
set n 0
label __label11
jump __label13 greaterThanEq 0 @links
label __label72
getlink smelter n
sensor __tmp18 smelter @type
jump __label14 notEqual __tmp18 @silicon-crucible
set minimum 31
sensor s smelter @sand
sensor c smelter @coal
sensor p smelter @pyratite
sensor __tmp24 smelter @silicon
op min a __tmp24 30
sensor e smelter @enabled
sensor power smelter @totalPower
sensor boost smelter @timescale
jump __label16 greaterThanEq s 31
set minimum s
set icon @sand
label __label16
label __label17
jump __label18 greaterThanEq c minimum
set minimum c
set icon @coal
label __label18
label __label19
jump __label20 greaterThanEq p minimum
set minimum p
set icon @pyratite
label __label20
label __label21
op greaterThan __tmp35 a 10
op sub __tmp36 31 a
op lessThan __tmp37 __tmp36 minimum
op land showa __tmp35 __tmp37
jump __label22 equal showa false
set icon @silicon
label __label22
label __label23
op mul __tmp40 0 BAR_SPACE
op add x 5 __tmp40
op mul __tmp42 index 22
op add y 4 __tmp42
draw color 0 0 80 255 0 0
op add __tmp44 __tmp40 4
op add __tmp45 __tmp42 3
draw rect __tmp44 __tmp45 BAR_SPACE 16 0 0
op greaterThan __tmp46 minimum 26
op equal __tmp47 showa 0
op land __tmp48 __tmp46 __tmp47
jump __label24 equal __tmp48 false
set icon @silicon-crucible
label __label24
label __label25
draw color 255 255 255 255 0 0
jump __label26 equal e false
jump __label28 lessThanEq power 0
op add __tmp53 __tmp40 12
op add __tmp54 __tmp42 11
draw image __tmp53 __tmp54 icon 16 0 0
jump __label27 always 0 0
label __label28
draw color 255 80 80 255 0 0
op add __tmp55 __tmp42 7
draw rect x __tmp55 14 8 0 0
draw color 0 0 0 255 0 0
op add __tmp56 __tmp40 7
op add __tmp57 __tmp42 9
draw rect __tmp56 __tmp57 8 4 0 0
op add __tmp58 __tmp40 17
draw rect __tmp58 __tmp55 2 2 0 0
op add __tmp61 __tmp42 13
draw rect __tmp58 __tmp61 2 2 0 0
draw color 255 80 80 255 0 0
op add __tmp62 __tmp40 9
op add __tmp63 __tmp42 10
draw rect __tmp62 __tmp63 2 2 0 0
label __label29
jump __label27 always 0 0
label __label26
draw color 255 80 80 255 0 0
draw stroke 3 0 0 0 0 0
op add __tmp64 __tmp40 7
op add __tmp65 __tmp42 16
op add __tmp66 __tmp40 17
op add __tmp67 __tmp42 6
draw line __tmp64 __tmp65 __tmp66 __tmp67 0 0
draw line __tmp64 __tmp67 __tmp66 __tmp65 0 0
draw color 0 0 0 255 0 0
draw lineRect __tmp44 __tmp45 16 16 0 0
draw stroke 2 0 0 0 0 0
label __label27
op add x x 16
op mul __tmp75 power e
jump __label30 notEqual __tmp75 0
set red 255
set green 0
set blue 0
jump __label31 always 0 0
label __label30
jump __label32 equal showa false
set red 255
set green 0
set blue 255
set minimum a
jump __label33 always 0 0
label __label32
set red 255
op greaterThan __tmp79 minimum 20
op greaterThanEq __tmp80 boost EXPECTED_BOOST
op land __tmp81 __tmp79 __tmp80
jump __label35 equal __tmp81 false
set red 0
label __label35
set green 0
jump __label37 lessThanEq minimum 10
set green 255
label __label37
set blue 0
label __label33
label __label31
jump __label38 lessThanEq boost EXPECTED_BOOST
op max red 192 red
op max green 192 green
op max blue 192 blue
set boost EXPECTED_BOOST
label __label38
label __label39
op mul __tmp90 BAR_LENGTH boost
op idiv length __tmp90 EXPECTED_BOOST
draw color red green blue 128 0 0
op mul __tmp92 minimum length
op idiv __tmp93 __tmp92 30
draw rect x y __tmp93 14 0 0
draw color red green blue 255 0 0
draw lineRect x y length 14 0 0
op add index index 1
op add factories factories 1
label __label14
label __label15
label __label12
op add n n 1
jump __label72 lessThan n @links
label __label13
set index FROM_INDEX
set n 0
label __label40
jump __label42 greaterThanEq 0 @links
label __label73
getlink smelter n
sensor __tmp99 smelter @type
jump __label43 notEqual __tmp99 @pyratite-mixer
set minimum 11
sensor s smelter @sand
sensor c smelter @coal
sensor l smelter @lead
sensor a smelter @pyratite
sensor e smelter @enabled
sensor power smelter @totalPower
sensor boost smelter @timescale
jump __label45 greaterThanEq s 11
set minimum s
set icon @sand
label __label45
label __label46
jump __label47 greaterThanEq c minimum
set minimum c
set icon @coal
label __label47
label __label48
jump __label49 greaterThanEq l minimum
set minimum l
set icon @lead
label __label49
label __label50
op mul __tmp115 1 BAR_SPACE
op add x 5 __tmp115
op mul __tmp117 index 22
op add y 4 __tmp117
draw color 0 0 80 255 0 0
op add __tmp119 __tmp115 4
op add __tmp120 __tmp117 3
draw rect __tmp119 __tmp120 BAR_SPACE 16 0 0
op greaterThan __tmp121 minimum 6
op equal __tmp122 showa 0
op land __tmp123 __tmp121 __tmp122
jump __label51 equal __tmp123 false
set icon @pyratite-mixer
label __label51
label __label52
draw color 255 255 255 255 0 0
jump __label53 equal e false
jump __label55 lessThanEq power 0
op add __tmp128 __tmp115 12
op add __tmp129 __tmp117 11
draw image __tmp128 __tmp129 icon 16 0 0
jump __label54 always 0 0
label __label55
draw color 255 80 80 255 0 0
op add __tmp130 __tmp117 7
draw rect x __tmp130 14 8 0 0
draw color 0 0 0 255 0 0
op add __tmp131 __tmp115 7
op add __tmp132 __tmp117 9
draw rect __tmp131 __tmp132 8 4 0 0
op add __tmp133 __tmp115 17
draw rect __tmp133 __tmp130 2 2 0 0
op add __tmp136 __tmp117 13
draw rect __tmp133 __tmp136 2 2 0 0
draw color 255 80 80 255 0 0
op add __tmp137 __tmp115 9
op add __tmp138 __tmp117 10
draw rect __tmp137 __tmp138 2 2 0 0
label __label56
jump __label54 always 0 0
label __label53
draw color 255 80 80 255 0 0
draw stroke 3 0 0 0 0 0
op add __tmp139 __tmp115 7
op add __tmp140 __tmp117 16
op add __tmp141 __tmp115 17
op add __tmp142 __tmp117 6
draw line __tmp139 __tmp140 __tmp141 __tmp142 0 0
draw line __tmp139 __tmp142 __tmp141 __tmp140 0 0
draw color 0 0 0 255 0 0
draw lineRect __tmp119 __tmp120 16 16 0 0
draw stroke 2 0 0 0 0 0
label __label54
op add x x 16
op mul __tmp150 power e
jump __label57 notEqual __tmp150 0
set red 255
set green 0
set blue 0
jump __label58 always 0 0
label __label57
set red 255
op greaterThanEq __tmp154 boost EXPECTED_BOOST
op land __tmp155 __tmp121 __tmp154
jump __label60 equal __tmp155 false
set red 0
label __label60
set green 0
jump __label62 lessThanEq minimum 3
set green 255
label __label62
set blue 0
label __label58
jump __label63 lessThanEq boost EXPECTED_BOOST
op max red 192 red
op max green 192 green
op max blue 192 0
set boost EXPECTED_BOOST
label __label63
label __label64
op mul __tmp164 BAR_LENGTH boost
op idiv length __tmp164 EXPECTED_BOOST
draw color red green blue 128 0 0
op mul __tmp166 minimum length
op idiv __tmp167 __tmp166 10
draw rect x y __tmp167 14 0 0
draw color red green blue 255 0 0
draw lineRect x y length 14 0 0
op add index index 1
label __label43
label __label44
label __label41
op add n n 1
jump __label73 lessThan n @links
label __label42
jump __label65 equal bank1 null
jump __label67 notEqual FROM_INDEX 0
read rate bank1 511
jump __label69 equal lastRate rate
op mul __tmp177 EXPECTED_BOOST factories
op div expected_flow __tmp177 11.25
op idiv expected_flow_str expected_flow 0.0002777777777777778
set lastRate rate
draw color 0 0 80 255 0 0
draw rect 156 0 16 176 0 0
draw color 255 128 128 255 0 0
draw rect 164 4 8 84 0 0
draw color 128 255 128 255 0 0
draw rect 164 89 8 84 0 0
draw stroke 1 0 0 0 0 0
draw color 255 0 0 255 0 0
draw lineRect 164 4 8 84 0 0
draw color 0 255 0 255 0 0
draw lineRect 164 89 8 84 0 0
draw color 0 0 80 255 0 0
draw rect 164 4 2 170 0 0
op sub __tmp181 rate expected_flow
op mul __tmp182 84 __tmp181
op div __tmp183 __tmp182 expected_flow
op add pos 88 __tmp183
op max __tmp185 pos 4
op min pos __tmp185 170
op add pos1 pos 7
op sub pos2 pos 7
draw color 255 255 16 255 0 0
draw triangle 156 pos1 164 pos 156 pos2
op idiv flow_str rate 0.0002777777777777778
label __label69
label __label70
label __label67
label __label68
print "\nNominal production: "
print expected_flow_str
print "/min\nActual production: "
print flow_str
print "/min"
label __label65
label __label66
drawflush display1
op sub __tmp191 @time start
op floor __tmp192 __tmp191 0
print "\nUpdate time: "
print __tmp192
print " ms"
printflush message1
label __label9
sensor __tmp13 switch1 @enabled
jump __label71 equal __tmp13 0
label __label10
end
