   162 instructions before optimizations.
    14 instructions eliminated by DeadCodeEliminator (4 iterations).
     6 instructions eliminated by SingleStepJumpEliminator (1 iterations).
    26 instructions eliminated by OutputTempEliminator.
     1 instructions eliminated by ExpressionOptimizer.
     9 instructions eliminated by ImproveNegativeConditionalJumps.
     3 instructions eliminated by JumpOverJumpEliminator.
     1 instructions eliminated by ImprovePositiveConditionalJumps.
     4 loops improved by LoopOptimizer.
     1 instructions added by LoopOptimizer.
     4 instructions eliminated by PrintMerger.
    99 instructions after optimizations.

Modifications by DeadCodeEliminator, iteration 1:
 
    20 label __label8
    21 set MEMORY block
    22 set lastCell 63
-    * set __tmp6 lastCell
    23 jump __label6 always
    24 label __label7
    25 jump __label10 equal __ast0 @memory-bank
 
    27 label __label10
    28 set MEMORY block
    29 set lastCell 511
-    * set __tmp6 lastCell
    30 jump __label6 always
    31 label __label9
    32 jump __label12 equal __ast0 @plastanium-conveyor
    33 jump __label11 always
    34 label __label12
    35 set FIRST_BLOCK n
-    * set __tmp6 FIRST_BLOCK
    36 jump __label6 always
    37 label __label11
-    * set __tmp6 null
    38 label __label6
    39 label __label4
    40 jump __label3 always
 
   126 label __label21
   127 set __tmp29 null
   128 label __label22
-    * set __tmp25 __tmp29
   129 jump __label20 always
   130 label __label19
-    * set __tmp25 null
   131 label __label20
   132 label __label17
   133 jump __label16 always
 
   145 set ratePerMin 0
   146 set __tmp51 @time
   147 set startTime __tmp51
-    * set __tmp47 startTime
   148 jump __label28 always
   149 label __label27
-    * set __tmp47 null
   150 label __label28
   151 print "Item Counter                  \n"
   152 print "Total items: [gold]"

Modifications by DeadCodeEliminator, iteration 2:
 
   121 label __label23
   122 set __tmp32 null
   123 label __label24
-    * set __tmp29 __tmp32
   124 jump __label22 always
   125 label __label21
-    * set __tmp29 null
   126 label __label22
   127 jump __label20 always
   128 label __label19

Modifications by DeadCodeEliminator, iteration 3:
 
   116 label __label25
   117 set __tmp41 null
   118 label __label26
-    * set __tmp32 __tmp41
   119 jump __label24 always
   120 label __label23
-    * set __tmp32 null
   121 label __label24
   122 jump __label22 always
   123 label __label21

Modifications by DeadCodeEliminator, iteration 4:
 
   111 op add __tmp42 batch BATCH_STEP
   112 op min __tmp43 __tmp42 MAX_BATCH
   113 set batch __tmp43
-    * set __tmp41 batch
   114 jump __label26 always
   115 label __label25
-    * set __tmp41 null
   116 label __label26
   117 jump __label24 always
   118 label __label23

Modifications by SingleStepJumpEliminator, iteration 1:
 
    33 jump __label11 always
    34 label __label12
    35 set FIRST_BLOCK n
-    * jump __label6 always
    36 label __label11
    37 label __label6
    38 label __label4
 
   110 op add __tmp42 batch BATCH_STEP
   111 op min __tmp43 __tmp42 MAX_BATCH
   112 set batch __tmp43
-    * jump __label26 always
   113 label __label25
   114 label __label26
-    * jump __label24 always
   115 label __label23
   116 label __label24
-    * jump __label22 always
   117 label __label21
   118 label __label22
-    * jump __label20 always
   119 label __label19
   120 label __label20
   121 label __label17
 
   134 set ratePerMin 0
   135 set __tmp51 @time
   136 set startTime __tmp51
-    * jump __label28 always
   137 label __label27
   138 label __label28
   139 print "Item Counter                  \n"

Modifications by OutputTempEliminator, iteration 1:
 
     2 set lastCell 0
     3 label __label0
     4 set MEMORY null
-    * set __tmp0 @links
-    * set FIRST_BLOCK __tmp0
-    * set __tmp1 @links
-    * set n __tmp1
+    5 set FIRST_BLOCK @links
+    6 set n @links
     7 label __label3
     8 op greaterThan __tmp2 n 0
     9 jump __label5 equal __tmp2 false
-    * op sub __tmp3 n 1
-    * set n __tmp3
-    * getlink __tmp4 n
-    * set block __tmp4
-    * sensor __tmp5 block @type
-    * set __ast0 __tmp5
+   10 op sub n n 1
+   11 getlink block n
+   12 sensor __ast0 block @type
    13 jump __label8 equal __ast0 @memory-cell
    14 jump __label7 always
    15 label __label8
 
    39 op equal __tmp7 MEMORY null
    40 jump __label0 notEqual __tmp7 false
    41 label __label2
-    * read __tmp8 MEMORY 0
-    * set total __tmp8
+   42 read total MEMORY 0
    43 set BATCH_DURATION 2000
    44 op max __tmp9 MIN_BATCH 10
    45 op idiv __tmp10 __tmp9 10
-    * op mul __tmp11 __tmp10 10
-    * set MIN_BATCH __tmp11
+   46 op mul MIN_BATCH __tmp10 10
    47 op max __tmp12 MAX_BATCH MIN_BATCH
    48 op idiv __tmp13 __tmp12 10
-    * op mul __tmp14 __tmp13 10
-    * set MAX_BATCH __tmp14
+   49 op mul MAX_BATCH __tmp13 10
    50 set BATCH_STEP 10
    51 set batch MIN_BATCH
-    * set __tmp15 @time
-    * set startTime __tmp15
+   52 set startTime @time
    53 set ratePerMin 0
-    * op add __tmp16 total batch
-    * set limit __tmp16
+   54 op add limit total batch
    55 control enabled switch1 0
    56 label __label13
    57 sensor __tmp17 switch1 @enabled
    58 op equal __tmp18 __tmp17 0
    59 jump __label15 equal __tmp18 false
-    * set __tmp19 @time
-    * set start __tmp19
+   60 set start @time
    61 set n FIRST_BLOCK
    62 label __label16
    63 op lessThan __tmp20 n @links
    64 jump __label18 equal __tmp20 false
-    * getlink __tmp21 n
-    * set block __tmp21
-    * op add __tmp22 n 1
-    * set n __tmp22
+   65 getlink block n
+   66 op add n n 1
    67 sensor __tmp23 block @type
    68 op equal __tmp24 __tmp23 @plastanium-conveyor
    69 jump __label19 equal __tmp24 false
-    * read __tmp26 MEMORY n
-    * set prev __tmp26
-    * sensor __tmp27 block @totalItems
-    * set curr __tmp27
+   70 read prev MEMORY n
+   71 sensor curr block @totalItems
    72 write curr MEMORY n
    73 op lessThan __tmp28 curr prev
    74 jump __label21 equal __tmp28 false
-    * op add __tmp30 total 10
-    * set total __tmp30
+   75 op add total total 10
    76 write total MEMORY 0
    77 op greaterThan __tmp31 total limit
    78 jump __label23 equal __tmp31 false
-    * op sub __tmp33 @time startTime
-    * set duration __tmp33
-    * set __tmp34 @time
-    * set startTime __tmp34
-    * op add __tmp35 limit batch
-    * set limit __tmp35
-    * op div __tmp36 batch duration
-    * set rate __tmp36
+   79 op sub duration @time startTime
+   80 set startTime @time
+   81 op add limit limit batch
+   82 op div rate batch duration
    83 op mul __tmp37 rate 16.666666666666668
    84 write __tmp37 MEMORY lastCell
    85 op mul __tmp38 rate 60000
-    * op floor __tmp39 __tmp38
-    * set ratePerMin __tmp39
+   86 op floor ratePerMin __tmp38
    87 op lessThanEq __tmp40 duration BATCH_DURATION
    88 jump __label25 equal __tmp40 false
    89 op add __tmp42 batch BATCH_STEP
-    * op min __tmp43 __tmp42 MAX_BATCH
-    * set batch __tmp43
+   90 op min batch __tmp42 MAX_BATCH
    91 label __label25
    92 label __label26
    93 label __label23
 
   100 jump __label16 always
   101 label __label18
   102 op sub __tmp44 @time startTime
-    * op floor __tmp45 __tmp44
-    * set elapsed __tmp45
+  103 op floor elapsed __tmp44
   104 op greaterThanEq __tmp46 elapsed 10000
   105 jump __label27 equal __tmp46 false
   106 op idiv __tmp48 batch 90
   107 op mul __tmp49 __tmp48 10
-    * op max __tmp50 __tmp49 MIN_BATCH
-    * set batch __tmp50
+  108 op max batch __tmp49 MIN_BATCH
   109 write 0 MEMORY lastCell
   110 set ratePerMin 0
-    * set __tmp51 @time
-    * set startTime __tmp51
+  111 set startTime @time
   112 label __label27
   113 label __label28
   114 print "Item Counter                  \n"
 
   140 op lessThan __tmp54 n @links
   141 jump __label31 equal __tmp54 false
   142 write 0 MEMORY n
-    * op add __tmp55 n 1
-    * set n __tmp55
+  143 op add n n 1
   144 label __label30
   145 jump __label29 always
   146 label __label31

Modifications by ExpressionOptimizer, iteration 1:
 
    82 op div rate batch duration
    83 op mul __tmp37 rate 16.666666666666668
    84 write __tmp37 MEMORY lastCell
-    * op mul __tmp38 rate 60000
-    * op floor ratePerMin __tmp38
+   85 op idiv ratePerMin rate 0.000016666666666666667
    86 op lessThanEq __tmp40 duration BATCH_DURATION
    87 jump __label25 equal __tmp40 false
    88 op add __tmp42 batch BATCH_STEP

Modifications by ImproveNegativeConditionalJumps, iteration 1:
 
     5 set FIRST_BLOCK @links
     6 set n @links
     7 label __label3
-    * op greaterThan __tmp2 n 0
-    * jump __label5 equal __tmp2 false
+    8 jump __label5 lessThanEq n 0
     9 op sub n n 1
    10 getlink block n
    11 sensor __ast0 block @type
 
    54 control enabled switch1 0
    55 label __label13
    56 sensor __tmp17 switch1 @enabled
-    * op equal __tmp18 __tmp17 0
-    * jump __label15 equal __tmp18 false
+   57 jump __label15 notEqual __tmp17 0
    58 set start @time
    59 set n FIRST_BLOCK
    60 label __label16
-    * op lessThan __tmp20 n @links
-    * jump __label18 equal __tmp20 false
+   61 jump __label18 greaterThanEq n @links
    62 getlink block n
    63 op add n n 1
    64 sensor __tmp23 block @type
-    * op equal __tmp24 __tmp23 @plastanium-conveyor
-    * jump __label19 equal __tmp24 false
+   65 jump __label19 notEqual __tmp23 @plastanium-conveyor
    66 read prev MEMORY n
    67 sensor curr block @totalItems
    68 write curr MEMORY n
-    * op lessThan __tmp28 curr prev
-    * jump __label21 equal __tmp28 false
+   69 jump __label21 greaterThanEq curr prev
    70 op add total total 10
    71 write total MEMORY 0
-    * op greaterThan __tmp31 total limit
-    * jump __label23 equal __tmp31 false
+   72 jump __label23 lessThanEq total limit
    73 op sub duration @time startTime
    74 set startTime @time
    75 op add limit limit batch
 
    77 op mul __tmp37 rate 16.666666666666668
    78 write __tmp37 MEMORY lastCell
    79 op idiv ratePerMin rate 0.000016666666666666667
-    * op lessThanEq __tmp40 duration BATCH_DURATION
-    * jump __label25 equal __tmp40 false
+   80 jump __label25 greaterThan duration BATCH_DURATION
    81 op add __tmp42 batch BATCH_STEP
    82 op min batch __tmp42 MAX_BATCH
    83 label __label25
 
    93 label __label18
    94 op sub __tmp44 @time startTime
    95 op floor elapsed __tmp44
-    * op greaterThanEq __tmp46 elapsed 10000
-    * jump __label27 equal __tmp46 false
+   96 jump __label27 lessThan elapsed 10000
    97 op idiv __tmp48 batch 90
    98 op mul __tmp49 __tmp48 10
    99 op max batch __tmp49 MIN_BATCH
 
   128 write 0 MEMORY lastCell
   129 set n 0
   130 label __label29
-    * op lessThan __tmp54 n @links
-    * jump __label31 equal __tmp54 false
+  131 jump __label31 greaterThanEq n @links
   132 write 0 MEMORY n
   133 op add n n 1
   134 label __label30

Modifications by JumpOverJumpEliminator, iteration 1:
 
     9 op sub n n 1
    10 getlink block n
    11 sensor __ast0 block @type
-    * jump __label8 equal __ast0 @memory-cell
-    * jump __label7 always
+   12 jump __label7 notEqual __ast0 @memory-cell
    13 label __label8
    14 set MEMORY block
    15 set lastCell 63
    16 jump __label6 always
    17 label __label7
-    * jump __label10 equal __ast0 @memory-bank
-    * jump __label9 always
+   18 jump __label9 notEqual __ast0 @memory-bank
    19 label __label10
    20 set MEMORY block
    21 set lastCell 511
    22 jump __label6 always
    23 label __label9
-    * jump __label12 equal __ast0 @plastanium-conveyor
-    * jump __label11 always
+   24 jump __label11 notEqual __ast0 @plastanium-conveyor
    25 label __label12
    26 set FIRST_BLOCK n
    27 label __label11

Modifications by ImprovePositiveConditionalJumps, iteration 1:
 
    32 print "Item Counter\n[salmon]No memory attached."
    33 printflush message1
    34 label __label1
-    * op equal __tmp7 MEMORY null
-    * jump __label0 notEqual __tmp7 false
+   35 jump __label0 equal MEMORY null
    36 label __label2
    37 read total MEMORY 0
    38 set BATCH_DURATION 2000

Modifications by LoopOptimizer, iteration 1:
 
     6 set n @links
     7 label __label3
     8 jump __label5 lessThanEq n 0
+    9 label __label32
    10 op sub n n 1
    11 getlink block n
    12 sensor __ast0 block @type
 
    28 label __label11
    29 label __label6
    30 label __label4
-    * jump __label3 always
+   31 jump __label32 greaterThan n 0
    32 label __label5
    33 print "Item Counter\n[salmon]No memory attached."
    34 printflush message1
 
    52 label __label13
    53 sensor __tmp17 switch1 @enabled
    54 jump __label15 notEqual __tmp17 0
+   55 label __label33
    56 set start @time
    57 set n FIRST_BLOCK
    58 label __label16
    59 jump __label18 greaterThanEq n @links
+   60 label __label34
    61 getlink block n
    62 op add n n 1
    63 sensor __tmp23 block @type
 
    88 label __label19
    89 label __label20
    90 label __label17
-    * jump __label16 always
+   91 jump __label34 lessThan n @links
    92 label __label18
    93 op sub __tmp44 @time startTime
    94 op floor elapsed __tmp44
 
   121 print " ms"
   122 printflush message1
   123 label __label14
-    * jump __label13 always
+  124 sensor __tmp17 switch1 @enabled
+  125 jump __label33 equal __tmp17 0
   126 label __label15
   127 control enabled switch1 0
   128 write 0 MEMORY lastCell
   129 set n 0
   130 label __label29
   131 jump __label31 greaterThanEq n @links
+  132 label __label35
   133 write 0 MEMORY n
   134 op add n n 1
   135 label __label30
-    * jump __label29 always
+  136 jump __label35 lessThan n @links
   137 label __label31
   138 end

Modifications by DataFlowOptimizer, iteration 1:
 
    47 set batch MIN_BATCH
    48 set startTime @time
    49 set ratePerMin 0
-    * op add limit total batch
+   50 op add limit total MIN_BATCH
    51 control enabled switch1 0
    52 label __label13
    53 sensor __tmp17 switch1 @enabled
 
    56 set start @time
    57 set n FIRST_BLOCK
    58 label __label16
-    * jump __label18 greaterThanEq n @links
+   59 jump __label18 greaterThanEq FIRST_BLOCK @links
    60 label __label34
    61 getlink block n
    62 op add n n 1
 
   128 write 0 MEMORY lastCell
   129 set n 0
   130 label __label29
-    * jump __label31 greaterThanEq n @links
+  131 jump __label31 greaterThanEq 0 @links
   132 label __label35
   133 write 0 MEMORY n
   134 op add n n 1

Modifications by PrintMerger, iteration 1:
 
   104 print "Item Counter                  \n"
   105 print "Total items: [gold]"
   106 print total
-    * print "[]\n"
-    * print "Rate: [green]"
+  107 print "[]\nRate: [green]"
   108 print ratePerMin
-    * print "[] items/min\n"
-    * print "Batch size: [green]"
+  109 print "[] items/min\nBatch size: [green]"
   110 print batch
-    * print "[]\n"
-    * print "Batch time: [gold]"
+  111 print "[]\nBatch time: [gold]"
   112 print elapsed
-    * print "[] ms\n"
   113 op sub __tmp52 @time start
   114 op floor __tmp53 __tmp52
-    * print "[lightgray]Loop time: "
+  115 print "[] ms\n[lightgray]Loop time: "
   116 print __tmp53
   117 print " ms"
   118 printflush message1

Final code before resolving virtual instructions:

set MIN_BATCH 10
set MAX_BATCH 1000
set lastCell 0
label __label0
set MEMORY null
set FIRST_BLOCK @links
set n @links
label __label3
jump __label5 lessThanEq n 0
label __label32
op sub n n 1
getlink block n
sensor __ast0 block @type
jump __label7 notEqual __ast0 @memory-cell
label __label8
set MEMORY block
set lastCell 63
jump __label6 always 0 0
label __label7
jump __label9 notEqual __ast0 @memory-bank
label __label10
set MEMORY block
set lastCell 511
jump __label6 always 0 0
label __label9
jump __label11 notEqual __ast0 @plastanium-conveyor
label __label12
set FIRST_BLOCK n
label __label11
label __label6
label __label4
jump __label32 greaterThan n 0
label __label5
print "Item Counter\n[salmon]No memory attached."
printflush message1
label __label1
jump __label0 equal MEMORY null
label __label2
read total MEMORY 0
set BATCH_DURATION 2000
op max __tmp9 MIN_BATCH 10
op idiv __tmp10 __tmp9 10
op mul MIN_BATCH __tmp10 10
op max __tmp12 MAX_BATCH MIN_BATCH
op idiv __tmp13 __tmp12 10
op mul MAX_BATCH __tmp13 10
set BATCH_STEP 10
set batch MIN_BATCH
set startTime @time
set ratePerMin 0
op add limit total MIN_BATCH
control enabled switch1 0 0 0 0
label __label13
sensor __tmp17 switch1 @enabled
jump __label15 notEqual __tmp17 0
label __label33
set start @time
set n FIRST_BLOCK
label __label16
jump __label18 greaterThanEq FIRST_BLOCK @links
label __label34
getlink block n
op add n n 1
sensor __tmp23 block @type
jump __label19 notEqual __tmp23 @plastanium-conveyor
read prev MEMORY n
sensor curr block @totalItems
write curr MEMORY n
jump __label21 greaterThanEq curr prev
op add total total 10
write total MEMORY 0
jump __label23 lessThanEq total limit
op sub duration @time startTime
set startTime @time
op add limit limit batch
op div rate batch duration
op mul __tmp37 rate 16.666666666666668
write __tmp37 MEMORY lastCell
op idiv ratePerMin rate 0.000016666666666666667
jump __label25 greaterThan duration BATCH_DURATION
op add __tmp42 batch BATCH_STEP
op min batch __tmp42 MAX_BATCH
label __label25
label __label26
label __label23
label __label24
label __label21
label __label22
label __label19
label __label20
label __label17
jump __label34 lessThan n @links
label __label18
op sub __tmp44 @time startTime
op floor elapsed __tmp44 0
jump __label27 lessThan elapsed 10000
op idiv __tmp48 batch 90
op mul __tmp49 __tmp48 10
op max batch __tmp49 MIN_BATCH
write 0 MEMORY lastCell
set ratePerMin 0
set startTime @time
label __label27
label __label28
print "Item Counter                  \n"
print "Total items: [gold]"
print total
print "[]\nRate: [green]"
print ratePerMin
print "[] items/min\nBatch size: [green]"
print batch
print "[]\nBatch time: [gold]"
print elapsed
op sub __tmp52 @time start
op floor __tmp53 __tmp52 0
print "[] ms\n[lightgray]Loop time: "
print __tmp53
print " ms"
printflush message1
label __label14
sensor __tmp17 switch1 @enabled
jump __label33 equal __tmp17 0
label __label15
control enabled switch1 0 0 0 0
write 0 MEMORY lastCell
set n 0
label __label29
jump __label31 greaterThanEq 0 @links
label __label35
write 0 MEMORY n
op add n n 1
label __label30
jump __label35 lessThan n @links
label __label31
end
